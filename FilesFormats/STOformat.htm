<html>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<meta http-equiv="Content-Language" content="en-us">
<link href="ManverusStyle.css" type=text/css rel=stylesheet>
<title>IE File Formats</title>
</head>

<body>

<h1 align="center">STOR file format</h1>
<table border="1" width="610">
  <tr>
    <td width="28%">FileExtension :</td>
    <td width="72%">STO</td>
  </tr>
  <tr>
    <td width="28%">Content :</td>
    <td width="72%">Description of stores files V.1</td>
  </tr>
  <tr>
    <td width="28%">History :</td>
    <td width="72%">File done by IEFFHP</td>
  </tr>
  <tr>
    <td width="28%">&nbsp;</td>
    <td width="72%">CatTeamBG info (21.09.01)</td>
  </tr>
  <tr>
    <td width="28%">&nbsp;</td>
    <td width="72%">M (15.01.02)</td>
  </tr>
</table>
<h2>Description</h2>
<p>These files contain a description of the types of items and services
available for sale in a given store, inn, tavern, or temple.</p>
<h2><a name="formSTOR_Versions">STOR file versions</a></h2>
<ul>
  <li><a href="#formSTORV1_0">V1.0: Planescape: Torment, Baldur's Gate, Icewind
    Dale</a></li>
</ul>
<h2 class="frmhead"><a name="formSTORV1_0">STOR V1.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formSTORV1_0_Header">Header</a>
  <li><a href="#formSTORV1_0_Sale">Items for sale</a>
  <li><a href="#formSTORV1_0_Drink">Drinks for sale</a>
  <li><a href="#formSTORV1_0_Cure">Cures for sale</a>
  <li><a href="#formSTORV1_0_Buy">Items purchased here</a></li>
</ul>
<h4 class="reshead"><a name="formSTORV1_0_Header">STOR V1.0 Header</a></h4>
<table border="1" class="tbl3" width="509">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="48"><font color="#000000">Offset</font></th>
      <th width="103"><font color="#000000">Size (data type)</font></th>
      <th width="336"><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="48">0x0000</td>
      <td width="103">4 (char array)</td>
      <td width="336">Signature ('STOR')</td>
    </tr>
    <tr>
      <td width="48">0x0004</td>
      <td width="103">4 (char array)</td>
      <td width="336">Version ('V1.0')</td>
    </tr>
    <tr>
      <td width="48">0x0008</td>
      <td width="103">4 (dword)</td>
      <td width="336">Type? (0=store, 1=tavern, 2=inn, 3=temple)</td>
    </tr>
    <tr>
      <td width="48">0x000c</td>
      <td width="103">4 (strref)</td>
      <td width="336">Name</td>
    </tr>
    <tr>
      <td width="48">0x0010</td>
      <td width="103">4 (dword)</td>
      <td width="336">Flags:
        <ul>
          <li>bit 0: User allowed to buy
          <li>bit 1: User allowed to sell
          <li>bit 2: User allowed to identify items
          <li>bit 3: User allowed to steal
          <li>bit 4: User allowed to purchase cures
          <li>bit 5: User allowed to donate money
          <li>bit 6: User allowed to purchase drinks</li>
          <li><font color="#000099">bit 7: Unknown</font></li>
          <li><font color="#000099">bit 8: Unknown</font></li>
          <li>bit 9: Buy Fenced Goods ?</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td width="48">0x0014</td>
      <td width="103">4 (dword)</td>
      <td width="336">Store &quot;sell price markup&quot; (percentage of base price store
        charges for items)</td>
    </tr>
    <tr>
      <td width="48">0x0018</td>
      <td width="103">4 (dword)</td>
      <td width="336">Store &quot;buy price markup&quot; (percentage of base price store is
        willing to pay)</td>
    </tr>
    <tr class="unk">
      <td width="48">0x001c</td>
      <td width="103">4 (dword)</td>
      <td width="336"><font color="#000099">Unknown</font></td>
    </tr>
    <tr class="unk">
      <td width="48">0x0020</td>
      <td width="103">4 (dword)</td>
      <td width="336">probability to fail to steal.</td>
    </tr>
    <tr class="unk">
      <td width="48">0x0024</td>
      <td width="103">8 (bytes)</td>
      <td width="336"><font color="#000099">Unknown</font></td>
    </tr>
    <tr>
      <td width="48">0x002c</td>
      <td width="103">4 (dword)</td>
      <td width="336">Offset to <a href="#formSTORV1_0_Buy">Items purchased here</a> section</td>
    </tr>
    <tr>
      <td width="48">0x0030</td>
      <td width="103">4 (dword)</td>
      <td width="336">Count of items in <a href="#formSTORV1_0_Buy">Items purchased here</a>
        section.</td>
    </tr>
    <tr>
      <td width="48">0x0034</td>
      <td width="103">4 (dword)</td>
      <td width="336">Offset to <a href="#formSTORV1_0_Sale">Items for sale</a> section.</td>
    </tr>
    <tr>
      <td width="48">0x0038</td>
      <td width="103">4 (dword)</td>
      <td width="336">Count of <a href="#formSTORV1_0_Sale">Items for sale</a></td>
    </tr>
    <tr class="unc">
      <td width="48">0x003c</td>
      <td width="103">4 (dword)</td>
      <td width="336"><font color="#000099">Unknown (usually 0x64).</font></td>
    </tr>
    <tr class="unc">
      <td width="48">0x0040</td>
      <td width="103">4 (dword)</td>
      <td width="336"><font color="#000099">Unknown (usually 0x64).</font></td>
    </tr>
    <tr>
      <td width="48">0x0044</td>
      <td width="103">8 (resref)</td>
      <td width="336">Dialog resource for rumors.</td>
    </tr>
    <tr>
      <td width="48">0x004c</td>
      <td width="103">4 (dword)</td>
      <td width="336">Offset to <a href="#formSTORV1_0_Drink">Drinks</a> section.</td>
    </tr>
    <tr>
      <td width="48">0x0050</td>
      <td width="103">4 (dword)</td>
      <td width="336">Count of <a href="#formSTORV1_0_Drink">Drinks</a>.</td>
    </tr>
    <tr class="unc">
      <td width="48">0x0054</td>
      <td width="103">8 (resref)</td>
      <td width="336"><font color="#000099">Dialog resource for ???.</font></td>
    </tr>
    <tr>
      <td width="48">0x005c</td>
      <td width="103">4 (dword)</td>
      <td width="336">Bitmapped flags indicating room types available for rent:
        <ul>
          <li>bit 0: peasant
          <li>bit 1: merchant
          <li>bit 2: noble
          <li>bit 3: royal</li>
        </ul>
        .</td>
    </tr>
    <tr>
      <td width="48">0x0060</td>
      <td width="103">4 (dword)</td>
      <td width="336">Price of a peasant room.</td>
    </tr>
    <tr>
      <td width="48">0x0064</td>
      <td width="103">4 (dword)</td>
      <td width="336">Price of a merchant room.</td>
    </tr>
    <tr>
      <td width="48">0x0068</td>
      <td width="103">4 (dword)</td>
      <td width="336">Price of a noble room.</td>
    </tr>
    <tr>
      <td width="48">0x006c</td>
      <td width="103">4 (dword)</td>
      <td width="336">Price of a royal room.</td>
    </tr>
    <tr>
      <td width="48">0x0070</td>
      <td width="103">4 (dword)</td>
      <td width="336">Offset to <a href="#formSTORV1_0_Cure">Cures</a> section.</td>
    </tr>
    <tr>
      <td width="48">0x0074</td>
      <td width="103">4 (dword)</td>
      <td width="336">Count of <a href="#formSTORV1_0_Cure">Cures</a>.</td>
    </tr>
    <tr class="unk">
      <td width="48">0x0078</td>
      <td width="103">36 (bytes)</td>
      <td width="336"><font color="#000099">Unknown</font></td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formSTORV1_0_Sale">STOR V1.0 Items for Sale</a></h4>
<table border="1" class="tbl3" width="509">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="48"><font color="#000000">Offset</font></th>
      <th width="103"><font color="#000000">Size (data type)</font></th>
      <th width="336"><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="48">0x0000</td>
      <td width="103">8 (resref)</td>
      <td width="336">Resource name of the item in question</td>
    </tr>
    <tr class="unk">
      <td width="48">0x0008</td>
      <td width="103">2 (word)</td>
      <td width="336"><font color="#000099">Unknown</font></td>
    </tr>
    <tr>
      <td width="48">0x000a</td>
      <td width="103">2 (word)</td>
      <td width="336">Usage 1. This is the first parameter passed when CreateItem is called
        from a script, for instance. This value probably means &quot;the number
        of 'primary' uses of this item&quot;. For quantity items, this is a
        quantity. For some magical items, this is a number of charges. (Some
        items may have more than one usable magical aspect -- for instance, cast
        fireball 5 times and aganazzar's scorcher 10 times. In a case like that,
        this would be 5.)</td>
    </tr>
    <tr>
      <td width="48">0x000c</td>
      <td width="103">2 (word)</td>
      <td width="336">Usage 2. This is the second parameter passed when CreateItem is called
        from a script, for instance. This value probably means &quot;the number
        of 'secondary' uses of this item&quot;. (For items which have more than
        one usable aspect -- for instance, cast fireball 5 times and aganazzar's
        scorcher 10 times. In a case like that, this would be 10.)</td>
    </tr>
    <tr>
      <td width="48">0x000e</td>
      <td width="103">2 (word)</td>
      <td width="336">Usage 3. This is the third parameter passed when CreateItem is called
        from a script, for instance. This value probably means &quot;the number
        of 'tertiary' uses of this item&quot;.</td>
    </tr>
    <tr>
      <td width="48">0x0010</td>
      <td width="103">4 (dword)</td>
      <td width="336">Flags.&nbsp;
        <ul>
          <li>bit 0 (0x01) is set, it means &quot;identified&quot;&nbsp;</li>
          <li> bit 2 (0x04) is set, it means &quot;stolen&quot;.</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td width="48">0x0014</td>
      <td width="103">4 (dword)</td>
      <td width="336">Number of this item in stock.</td>
    </tr>
    <tr>
      <td width="48">0x0018</td>
      <td width="103">4 (dword)</td>
      <td width="336">Infinite supply flag (?)</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formSTORV1_0_Drink">STOR V1.0 Drinks for Sale</a></h4>
<table border="1" class="tbl3" width="509">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="48"><font color="#000000">Offset</font></th>
      <th width="103"><font color="#000000">Size (data type)</font></th>
      <th width="336"><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr class="unk">
      <td width="48">0x0000</td>
      <td width="103">8 (bytes)</td>
      <td width="336"><font color="#000099">Unknown</font></td>
    </tr>
    <tr>
      <td width="48">0x0008</td>
      <td width="103">4 (strref)</td>
      <td width="336">Drink name</td>
    </tr>
    <tr>
      <td width="48">0x000c</td>
      <td width="103">4 (dword)</td>
      <td width="336">Drink price</td>
    </tr>
    <tr class="unc">
      <td width="48">0x0010</td>
      <td width="103">4 (dword)</td>
      <td width="336"><font color="#000099">Unknown. Maybe &quot;percentage chance of hearing a rumor if you buy
        this&quot;, or may indicate the strength of the alcohol's intoxicative
        facility.</font></td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formSTORV1_0_Cure">STOR V1.0 Cures for Sale</a></h4>
<table border="1" class="tbl3" width="509">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="48"><font color="#000000">Offset</font></th>
      <th width="103"><font color="#000000">Size (data type)</font></th>
      <th width="336"><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="48">0x0000</td>
      <td width="103">8 (resref)</td>
      <td width="336">Resource name of the spell to be cast on the selected person</td>
    </tr>
    <tr>
      <td width="48">0x0008</td>
      <td width="103">4 (dword)</td>
      <td width="336">Price of this cure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formSTORV1_0_Buy">STOR V1.0 Items Purchased Here</a></h4>
<p>This is an array of dwords. These dwords indicate categories of items from
the Item category codes table. The category code can also be found inside the <a href="ITMformat.htm"><font color="#FF0000"> ITM
file</font></a> for an itm.</p>

<h2><a name="tableItemType">Item category codes</a></h2>
<p>These codes are used in Stor files to indicate which types of items they will
buy. They may also be used to determine which inventory slots the item is
allowed to go into on the inventory screen.</p>
<p><strong>Codes from Baldur's Gate, Planescape: Torment, and Icewind Dale</strong></p>
<table border="1" cellPadding="2" class="tblidx2" width="98%">
  <colgroup>
    <col class="col1" width="10%">
    <col class="col2" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Code</font></th>
      <th><font color="#000000">Item type</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>Books/misc (this may be the default type, as several &quot;monster
        items&quot; are of this type.</td>
    </tr>
    <tr>
      <td>0x0001</td>
      <td>Amulets and necklaces</td>
    </tr>
    <tr>
      <td>0x0002</td>
      <td>Armor</td>
    </tr>
    <tr>
      <td>0x0003</td>
      <td>Belts and girdles</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>Boots</td>
    </tr>
    <tr>
      <td>0x0005</td>
      <td>Arrows</td>
    </tr>
    <tr>
      <td>0x0006</td>
      <td>Bracers and gauntlets</td>
    </tr>
    <tr>
      <td>0x0007</td>
      <td>Helms, hats, and other head-wear</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>Keys (not in Icewind Dale?)</td>
    </tr>
    <tr>
      <td>0x0009</td>
      <td>Potions</td>
    </tr>
    <tr>
      <td>0x000a</td>
      <td>Rings</td>
    </tr>
    <tr>
      <td>0x000b</td>
      <td>Scrolls</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>Shields (not in IWD)</td>
    </tr>
    <tr>
      <td>0x000d</td>
      <td><font color="#000099">??? Unknown</font></td>
    </tr>
    <tr>
      <td>0x000e</td>
      <td>Bullets (for a sling)</td>
    </tr>
    <tr>
      <td>0x000f</td>
      <td>Bows</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>Daggers</td>
    </tr>
    <tr>
      <td>0x0011</td>
      <td>Maces (in BG, this includes clubs)</td>
    </tr>
    <tr>
      <td>0x0012</td>
      <td>Slings</td>
    </tr>
    <tr>
      <td>0x0013</td>
      <td>Short swords</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>Long swords (in BG, this includes 2-handed and bastard swords)</td>
    </tr>
    <tr>
      <td>0x0015</td>
      <td>Hammers</td>
    </tr>
    <tr>
      <td>0x0016</td>
      <td>Morning stars</td>
    </tr>
    <tr>
      <td>0x0017</td>
      <td>Flails</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>Darts</td>
    </tr>
    <tr>
      <td>0x0019</td>
      <td>Axes (specifically, 1-handed axes -- halberds and 2-handed polearms
        not included)</td>
    </tr>
    <tr>
      <td>0x001a</td>
      <td>Quarterstaff</td>
    </tr>
    <tr>
      <td>0x001b</td>
      <td>Crossbow</td>
    </tr>
    <tr>
      <td>0x001c</td>
      <td>Hand-to-hand weapons (fist, fist irons, punch daggers, etc)</td>
    </tr>
    <tr>
      <td>0x001d</td>
      <td>Spears</td>
    </tr>
    <tr>
      <td>0x001e</td>
      <td>Halberds (2-handed polearms)</td>
    </tr>
    <tr>
      <td>0x001f</td>
      <td>Crossbow bolts</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>Cloaks and robes</td>
    </tr>
    <tr>
      <td>0x0021</td>
      <td>Gold pieces (not an inventory item, but can appear as &quot;monster
        dropped&quot; treasure)</td>
    </tr>
    <tr>
      <td>0x0022</td>
      <td>Gems</td>
    </tr>
    <tr>
      <td>0x0023</td>
      <td>Wands</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>
        <ul>
          <li><strong>Torment:</strong> Eyeballs
          <li><strong>Icewind Dale:</strong> Keys
          <li><strong>Baldur's Gate:</strong> unused</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0025</td>
      <td>
        <ul>
          <li><strong>Torment:</strong> Bracelets
          <li><strong>Icewind Dale:</strong> (a broken shield?)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0026</td>
      <td>
        <ul>
          <li><strong>Torment:</strong> Earrings
          <li><strong>Icewind Dale:</strong> (2 broken swords, including the
            broken sword of Aihonen)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0027</td>
      <td><strong>Torment:</strong> Tattoos</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td><strong>Torment:</strong> Lenses</td>
    </tr>
    <tr>
      <td>0x0029</td>
      <td>
        <ul>
          <li><strong>Torment:</strong> Teeth
          <li><strong>Icewind Dale:</strong> Bucklers
          <li><strong>Baldur's Gate:</strong> unused</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x002a</td>
      <td><strong>Icewind Dale:</strong> &quot;Candle&quot; (i.e. only 1 item)</td>
    </tr>
    <tr>
      <td>0x002b</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td><strong>Icewind Dale:</strong> Clubs</td>
    </tr>
    <tr>
      <td>0x002d</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x002e</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x002f</td>
      <td><strong>Icewind Dale:</strong> Shields (large)</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x0031</td>
      <td><strong>Icewind Dale:</strong> Shields (medium)</td>
    </tr>
    <tr>
      <td>0x0032</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x0033</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x0035</td>
      <td><strong>Icewind Dale:</strong> Shields (small)</td>
    </tr>
    <tr>
      <td>0x0036</td>
      <td><font color="#000099">??? Unknown or unused</font></td>
    </tr>
    <tr>
      <td>0x0037</td>
      <td><strong>Icewind Dale:</strong> &quot;Telescope&quot; (only 1 item)</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td><strong>Icewind Dale:</strong> &quot;Bottle of wine&quot; and
        &quot;Container of Razorvine Extract&quot; (only 2 items)</td>
    </tr>
    <tr>
      <td>0x0039</td>
      <td><strong>Icewind Dale:</strong> Great swords</td>
    </tr>
  </tbody>
</table></body>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
</html>
