<html>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<meta http-equiv="Content-Language" content="en-us">
<link href="ManverusStyle.css" type=text/css rel=stylesheet>
<title>IE File Formats</title>
</head>

<body>
<h1 align="center">WMAP file format</h1>
<table border="1" width="610">
  <tr>
    <td width="28%">FileExtension :</td>
    <td width="72%">WMAP</td>
  </tr>
  <tr>
    <td width="28%">Content :</td>
    <td width="72%">Description of world map V.1.0 file</td>
  </tr>
  <tr>
    <td width="28%">History :</td>
    <td width="72%">File done by IEFFHP</td>
  </tr>
  <tr>
    <td width="28%">&nbsp;</td>
    <td width="72%">Updated by Manveru (22.08.2001)</td>
  </tr>
</table>
<h2>Description</h2>
<p>This describes the top-level map structure of the game. It tells which areas
are located at which coordinates on the worldmap, and it tells which <a href="MOSformat.htm"><font color="#FF0000">MOS</font></a>
and <a href="BAMformat.htm"><font color="#FF0000">BAM</font></a>
files to use to visually display the worldmap. It appears to also encode which
areas are visited, which areas are visible, and possibly which areas are
visitable.</p>
<p>The areas may be also put on the worldmap in ToB using specified 2DA files :</p>
<ul>
  <li><u><a href="../2das/xnewarea2da.htm"><font color="#FF0000">XNEWAREA.2DA</font></a><font color="#FF0000">&nbsp;</font></u>
    (Area entries section of wmp )</li>
  <li>2DA file specified in <u><a href="../2das/xnewarea2da.htm"><font color="#FF0000">XNEWAREA.2DA</font></a></u>
    (Area links section) for example XL3000.2DA</li>
</ul>
<p>These files also explains WMP issues in the mentioned sections.</p>
<h2><a name="formWMAP_Versions">WMAP file versions</a></h2>
<ul>
  <li><a href="#formWMAPV1_0">V1.0: Baldur's Gate, Planescape: Torment, Icewind
    Dale, Baldur's Gate 2</a></li>
</ul>
<h2 class="frmhead"><a name="formWMAPV1_0">WMAP V1.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formWMAPV1_0_Header">Header</a>
  <li><a href="#formWMAPV1_0_Entry">Worldmap entries</a>
  <li><a href="#formWMAPV1_0_Area">Area entries</a>
  <li><a href="#formWMAPV1_0_AreaLink">Area link entries</a></li>
</ul>
<h4 class="reshead"><a name="formWMAPV1_0_Header">WMAP V1.0 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (char array)</td>
      <td>Signature ('WMAP')</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (char array)</td>
      <td>Version ('V1.0')</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formWMAPV1_0_Entry">worldmap entries</a>.</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formWMAPV1_0_Entry">worldmap entries</a> from
        start of file.</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formWMAPV1_0_Entry">WMAP V1.0 Worldmap entry</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>8 (resref)</td>
      <td>Map resource name (i.e. <a href="MOSformat.htm"><font color="#FF0000"> MOS file</font></a> for background graphics of this
        worldmap).</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Width</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Height</td>
    </tr>
    <tr class="unk">
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td><font color="#000099">Unknown</font></td>
    </tr>
    <tr class="upd">
      <td>0x0014</td>
      <td>4 (strref)</td>
      <td>Name of the area (for tooltips?)</td>
    </tr>
    <tr class="unk">
      <td>0x0018</td>
      <td>4 (dword)</td>
      <td><font color="#000099">Unknown</font></td>
    </tr>
    <tr class="unk">
      <td>0x001c</td>
      <td>4 (dword)</td>
      <td><font color="#000099">Unknown</font></td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formWMAPV1_0_Area">area entries</a> in this
        worldmap.</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (dword)</td>
      <td>Offset of first <a href="#formWMAPV1_0_Area">area entry</a> for this
        worldmap.</td>
    </tr>
    <tr class="upd">
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td>Offset of first <a href="#formWMAPV1_0_AreaLink">area link entries</a> in
        this worldmap.</td>
    </tr>
    <tr class="upd">
      <td>0x002c</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formWMAPV1_0_AreaLink">area link entries</a>
        for this worldmap.</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>8 (resref)</td>
      <td>Resource name of the <a href="BAMformat.htm"><font color="#FF0000"> BAM file</font></a> containing the map icons for the areas.</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>128 (bytes)</td>
      <td>Probably reserved for future expansion</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formWMAPV1_0_Area">WMAP V1.0 Area entry</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr class="upd">
      <td>0x0000</td>
      <td>8 (resref)</td>
      <td>name of this area (as referenced by area links?)</td>
    </tr>
    <tr class="upd">
      <td>0x0008</td>
      <td>8 (resref)</td>
      <td><a href="AreFormat.htm"><font color="#FF0000">AREA</font></a> resref for this area
      <td>&nbsp;</td>
    <tr>
      <td>0x0010</td>
      <td>32 (char array)</td>
      <td>Area long name (probably only used for editing purposes?)</td>
    </tr>
    <tr class="upd">
      <td>0x0030</td>
      <td>4 (dword)</td>
      <td>Bitmap indicating status of area:
        <ul>
          <li>bit 0: is area visible?
          <li>bit 1: unknown
          <li>bit 2: set if area can be visited
          <li>bit 3: set if area has been visited
          <li>bits 4-31: unused?</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Sequence within <a href="BAMformat.htm"><font color="#FF0000"> BAM file</font></a> for the icons for this area.</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>4 (dword)</td>
      <td>X coordinate of this area within the world map</td>
    </tr>
    <tr>
      <td>0x003c</td>
      <td>4 (dword)</td>
      <td>Y coordinate of this area within the world map</td>
    </tr>
    <tr>
      <td>0x0040</td>
      <td>4 (strref)</td>
      <td>Name of this location (as seen on captions)</td>
    </tr>
    <tr class="upd">
      <td>0x0044</td>
      <td>4 (strref)</td>
      <td>Same as field at 0x40? (or perhaps name for tooltips?)</td>
    </tr>
    <tr class="upd">
      <td>0x0048</td>
      <td>8 (resref)</td>
      <td>Resref of <a href="MOSformat.htm"><font color="#FF0000">MOS
        file</font></a> to be shown while this area is loading.</td>
    </tr>
    <tr class="upd">
      <td>0x0050</td>
      <td>4 (dword)</td>
      <td>Index of the first entry in the first group (North) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x0054</td>
      <td>4 (dword)</td>
      <td>Count of entries in the first group (North) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x0058</td>
      <td>4 (dword)</td>
      <td>Index of the first entry in the second group (East) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x005c</td>
      <td>4 (dword)</td>
      <td>Count of entries in the second group (East) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x0060</td>
      <td>4 (dword)</td>
      <td>Index of the first entry in the third group (South) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x0064</td>
      <td>4 (dword)</td>
      <td>Count of entries in the third group (South) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x0068</td>
      <td>4 (dword)</td>
      <td>Index of the first entry in the fourth group (West) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x006c</td>
      <td>4 (dword)</td>
      <td>Count of entries in the fourth group (West) of area links <em>from</em>
        this area.</td>
    </tr>
    <tr class="upd">
      <td>0x0070</td>
      <td>128 (bytes)</td>
      <td><font color="#000099">Reserved for future expansion?)</font></td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formWMAPV1_0_AreaLink">WMAP V1.0 Area Link entry</a></h4>
<table border="1" class="tbl3" width="509">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="48"><font color="#000000">Offset</font></th>
      <th width="99"><font color="#000000">Size (datatype)</font></th>
      <th width="340"><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr class="upd">
      <td width="48">0x0000</td>
      <td width="99">4 (dword)</td>
      <td width="340">index of the area to which this link leads</td>
    </tr>
    <tr class="upd">
      <td width="48">0x0004</td>
      <td width="99">32 (char array)</td>
      <td width="340">Name of the entry point in the destination area</td>
    </tr>
    <tr class="upd">
      <td width="48"><font color="#000099">0x0024</font></td>
      <td width="99"><font color="#000099">4 (dword)</font></td>
      <td width="340"><font color="#000099">Described as DISTANCE_SCALE , maybe
        multipier of the FLAGS value ?</font></td>
    </tr>
    <tr>
      <td width="48"><font color="#000099">0x0028</font></td>
      <td width="99"><font color="#000099">4 (dword)</font></td>
      <td width="340"><font color="#000099">Unknown, somehow related with the
        travel time , described as FLAGS</font></td>
    </tr>
    <tr>
      <td width="48">0x002c</td>
      <td width="99">8 (resref)</td>
      <td width="340">area of random encounter (ENCOUNTER0)</td>
    </tr>
    <tr>
      <td width="48">0x0034</td>
      <td width="99">8 (resref)</td>
      <td width="340">area of random encounter (ENCOUNTER1)</td>
    </tr>
    <tr>
      <td width="48">0x003c</td>
      <td width="99">8 (resref)</td>
      <td width="340">area of random encounter (ENCOUNTER2)</td>
    </tr>
    <tr>
      <td width="48">0x0044</td>
      <td width="99">8 (resref)</td>
      <td width="340">area of random encounter (ENCOUNTER3)</td>
    </tr>
    <tr>
      <td width="48">0x004c</td>
      <td width="99">8 (resref)</td>
      <td width="340">area of random encounter (ENCOUNTER4)</td>
    </tr>
    <tr>
      <td width="48">0x0054</td>
      <td width="99">4 (dword)</td>
      <td width="340">probability of random encounter</td>
    </tr>
    <tr class="unk">
      <td width="48">0x0028</td>
      <td width="99">128 (bytes)</td>
      <td width="340"><font color="#000099">Unknown/reserved</font></td>
    </tr>
  </tbody>
</table>
<p class="toindex">&nbsp;</p>

</body>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
</html>
