<html>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<meta http-equiv="Content-Language" content="en-us">
<link href="ManverusStyle.css" type=text/css rel=stylesheet>
<title>IE File Formats</title>
</head>

<body>

<h1 align="center">TLK file format</h1>
<table border="1" width="610">
  <tr>
    <td width="172">FileExtension :</td>
    <td width="422">TLK (Talk Table)</td>
  </tr>
  <tr>
    <td width="172">Content :</td>
    <td width="422">Description of TLK V.1</td>
  </tr>
  <tr>
    <td width="172">History :</td>
    <td width="422">File done by IEFFHP</td>
  </tr>
  <tr>
    <td width="172">Update :</td>
    <td width="422">Manveru 06.09.2001&nbsp;</td>
  </tr>
  <tr>
    <td width="172">Update :</td>
    <td width="422">Avenger2 20.01.2002&nbsp;</td>
  </tr>
</table>
<h2>Description</h2>
<p>Each Infinity Engine game has at least one TLK file with it. Only one of
these files will be used at a time. These files contain several strings (with
some associated information) which are looked up by a 32-bit identifier called a
&quot;Strref&quot; (String Reference). If the designer wishes to replace all the
dialog (for instance, to translate to another language), it is a very simple
matter of replacing just one file, (sound files not included). Anyway, this is a
very straightforward file format. To find a particular string, use the Strref as
a 0-based index into the table of entries.</p>
<p>According to the BioWare developers this kind of file was named there as
&quot;Talk Table&quot;</p>
<h2><a name="formTLK_Versions">TLK file versions</a></h2>
<ul>
  <li><a href="#formTLKV1">V1: Baldur's Gate, Planescape: Torment, Icewind Dale</a></li>
</ul>
<h2 class="frmhead"><a name="formTLKV1">TLK V1</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formTLKV1_Header">Header</a>
  <li><a href="#formTLKV1_Entry">Entries</a>
  <li><a href="#formTLKV1_Strings">Strings section</a></li>
</ul>
<h4 class="reshead"><a name="formTLKV1_Header">TLK V1 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (data type)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (char array)</td>
      <td>Signature ('TLK ')</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (char array)</td>
      <td>Version ('V1 ')</td>
    </tr>
    <tr class="unc">
      <td>0x0008</td>
      <td>2 (word)</td>
      <td><font color="#000099">unknown (always 0?)</font></td>
    </tr>
    <tr>
      <td>0x000a</td>
      <td>4 (dword)</td>
      <td>Number of <a href="#formTLKV1_Entry">Strref entries</a> in this file.</td>
    </tr>
    <tr>
      <td>0x000e</td>
      <td>4 (dword)</td>
      <td>Offset to <a href="#formTLKV1_Strings">string data</a></td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTLKV1_Entries">TLK V1 Entries</a></h4>
<p>This section is hardcoded to start at byte 18 from the beginning of the file.
The string offsets are relative to the strings section.</p>
<table border="1" class="tbl3" width="509">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="48"><font color="#000000">Offset</font></th>
      <th width="103"><font color="#000000">Size (data type)</font></th>
      <th width="336"><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr class="unc">
      <td width="48">0x0000</td>
      <td width="103">2 (word)</td>
      <td width="336">
        <ul>
          <li>00 - No message data</li>
          <li>02 - Sound references without text</li>
          <li>03 - Standard message. Ambient message. Used for sound without text (BG1) or message
            displayed over characters head (BG2) , Message with tags (for instance &lt;CHARNAME&gt;
            ) for all games except BG2</li>
          <li>07 - Message with tags (for instance &lt;CHARNAME&gt; ) in BG2
            only</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td width="48">0x0002</td>
      <td width="103">8 (resref)</td>
      <td width="336">resource name of the associated sound, if any</td>
    </tr>
    <tr>
      <td width="48">0x000a</td>
      <td width="103">4 (dword)</td>
      <td width="336">Volume variance.</td>
    </tr>
    <tr>
      <td width="48">0x000e</td>
      <td width="103">4 (dword)</td>
      <td width="336">Pitch variance.</td>
    </tr>
    <tr>
      <td width="48">0x0012</td>
      <td width="103">4 (dword)</td>
      <td width="336">offset of this string relative to the <a href="#formTLKV1_Strings">strings
        section</a></td>
    </tr>
    <tr>
      <td width="48">0x0016</td>
      <td width="103">4 (dword)</td>
      <td width="336">length of this string</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTLKV1_Strings">TLK V1 Strings</a></h4>
<p>This section is entirely composed of ASCII strings. They contain no terminator
character. It is assumed they may contain a NUL where the string will be stopped
displayed, but this feature is useless and unused. The sound reference may contain a NUL terminator though,
All the indexing for
these strings is done in the <a href="#formTLKV1_Entries">strref entries</a>
 section. </p>

</body>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
</html>
