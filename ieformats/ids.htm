<html>
<head>
<link rel="stylesheet" type="text/css" href="general.css" />
</head>
<body>
<div class="title_main">IDS file format</div>
<br />
<div class="fileheader">Applies to:</div>
<div class="indent1">BG1, BG1: TotS, BG2, BG2: ToB, PST, IWD, IWD:HoW, IWD:TotL, IWD2</div>
<br />

<div class="fileheader">General Description</div>
<div class="indent1">
IDS files provide a mapping from numeric values to arbitrary string values.<br />
IDS files allow you to assign text to numerical values to use in scripts or to 
reference other files and give them numerical values. In a spellcasting script 
the SPELL.IDS gives the text WIZARD_MAGIC_MISSILE to spell number 2122 where 2122 
is the file containing magic missile. While most editors would know that magic missile 
is SPWI122 you cant remember them all its much easier to script WIZARD_GASEOUS_FORM for 
example or to detect state STATE_INVISIBLE than whatever its value it. When you compile 
a script the compiler reads the text like WIZARD_MAGIC_MISSILE and looks at SPELL.IDS 
and translates it into 2122 when its compiling. The end result is that your BCS files has 
2122 in it, thus you dont need SPELL.IDS for the engine to read it back again. Which is 
why removing stat.ids still allows already compiled scripts to still detect states.<br />
<br />
IDS files can also reference other files such as PRO files. For example you have a PRO 
file called ICEKNIFE.PRO but you need a numerical value to use in the spell so you add 
ICEKNIFE.PRO to the PROJECTL.IDS and give it a number. The engine reads this IDS everytime 
you start the game so this is critical for running and would mess it up if you removed it. 
When it reads it, it remembers all the numbers in the file and the names of the PRO files 
that go with them, then when a spell or item references that number it can play the correct 
PRO file. So basically some files are critical to running and some aren't but are needed 
to compile scripts.<br />
</div>
<br />

<div class="fileheader">Detailed Description</div>
<div class="indent1">
This is a text file format, arranged in two columns. Like all text files in
BG, it has CR-LF delimited lines (i.e. 0x0d 0x0a at the end of each line). First
column is numeric constants, either decimal integers, or hexadecimal integers
specified in the C/C++ notation. In case you are not familiar with this
notation, it looks like <code>0x07d0</code>, for instance, which is the hex
representation of decimal <code>2000</code>. Everything to the right of the
whitespace following the constant is the string value of the constant. The only
row which doesn't match this specification is the first row, which consists of a
single number. When these files are loaded into memory, sometimes a quick
&quot;integer to string&quot; index is built. The first row, which is not
loaded, holds the maximum value, which is computed whenever the file is loaded,
and which would determine the size of a quick lookup table, if one is to be
built.<br />
</div>
<br />

<div class="fileheader">Encryption</div>
<div class="indent1">
NB. Some files are encrypted, as detailed on the <a href="encryption.htm">encryption page</a>.
</body>
</html>
