<html>
<head>
<link rel="stylesheet" type="text/css" href="general.css" />
</head>
<body>
<div class="title_main">ARE file format</div>
<br />
<div class="fileheader">Applies to:</div>
<div class="indent1">BG1, BG1: TotS, BG2, BG2: ToB, PST, IWD, IWD:HoW, IWD:TotL</div>
<br />

<div class="fileheader">General Description</div>
<div class="indent1">
This file format describes the content of an area, rather than its visual representation. It contains the list of actors, items, entrances and exits, spawn points, and other area-associated info. Essentially, this format is all about how the characters interact with the area and how the area responds, whereas the WED file is all about how the area appears graphically.<br />
</div>
<br />
<div class="fileheader">Detailed Description</a></div>
<div class="indent1">
Overall structure<br />
Note: The order of the sections in an AREA file do actually vary. In many files the sections are always found in a particular order. In AREA files, the same resource in its normal state and in its &quot;post-save&quot; state will have the different sections in different orders. The sections here, then, are stored in the order in which they are referenced in the header.<br />
<div class="indent1">
  <li><a href="#formAREAV1_0_Header">File header</a>
  <li><a href="#formAREAV1_0_Actor">Actors</a>
  <li><a href="#formAREAV1_0_Info">Info points (and trigger points and exits)</a>
  <li><a href="#formAREAV1_0_Spawn">Spawn points</a>
  <li><a href="#formAREAV1_0_Entrance">Entrances</a>
  <li><a href="#formAREAV1_0_Container">Containers</a>
  <li><a href="#formAREAV1_0_Item">Items</a>
  <li><a href="#formAREAV1_0_Vertices">Vertices</a>
  <li><a href="#formAREAV1_0_Ambient">Ambients</a>
  <li><a href="#formAREAV1_0_Variable">Variables</a>
  <li><a href="#formAREAV1_0_Explored">&quot;Explored&quot; bitmask</a>
  <li><a href="#formAREAV1_0_Door">Doors</a>
  <li><a href="#formAREAV1_0_Anim">Animations</a>
  <li><a href="#formAREAV1_0_Automap">Automap notes</a>
  <li><a href="#formAREAV1_0_TiledObj">Tiled objects</a>
  <li><a href="#formAREAV1_0_ProjTraps">Projectile traps (BG2)</a>
  <li><a href="#Songs entries">Songs entries</a></li>
  <li><a href="#RestOptionSpawn">Sleep option interruption by appearing
    creatures</a></li>
</div>
<br />
</div>

<div class="fileheader"><a name="formAREAV1_0_Header">V1.0 File header</a></div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (char array)</td>
      <td>Signature ('AREA')</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (char array)</td>
      <td>Version ('V1.0')</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>8 (resref)</td>
      <td>Resref of the WED file corresponding to this file.</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td>Counter of the time when the area was saved in seconds of real time.</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4 (dword)</td>
      <td>Area flag (see AREAFLAG.IDS).<br />
        BG1:TotS, IWD:ToTL, BG2:ToB:<br />
        <div class="indent1">
          bit 0: Save allowed<br />
          bit 1: Tutorial area (not BG1)<br />
          bit 2: Dead magic zone<br />
          bit 3: Dream<br />
        </div>
        <br />
        PST, unknown:
        <div class="indent1">
          02 in AR0104C<br />
          04 in AR0200<br />
          06 in AR1500<br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>8 (resref)</td>
      <td>Resref of the area to the North of this area. Unused used in BG2/IWD</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (dword)</td>
      <td>(usually 3, sometimes 1) and in BG2/IWD usually 0</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>8 (resref)</td>
      <td>Resref of the area to the East of this area. Unused in BG2/IWD</td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td>4 (dword)</td>
      <td>(usually 3, sometimes 1) and in BG2/IWD usually 0</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>8 (resref)</td>
      <td>Resref of the area to the South of this area. Not used in BG2/IWD</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>4 (dword)</td>
      <td>(usually 3, sometimes 1) and in BG2/IWD usually 0</td>
    </tr>
    <tr>
      <td>0x003c</td>
      <td>8 (resref)</td>
      <td>Resref of the area to the West of this area. Unused in BG2/IWD</td>
    </tr>
    <tr>
      <td>0x0044</td>
      <td>4 (dword)</td>
      <td>(usually 3, sometimes 1) and in BG2/IWD usually 0</td>
    </tr>
    <tr>
      <td>0x0048</td>
      <td>2 (word)</td>
      <td>Flags: according to the IDSAREATYPE.IDS in ToB
        <div class="indent1">
          bit 0: Outdoor<br />
          bit 1: Day/night<br />
          bit 2: Weather<br />
          bit 3: City<br />
          bit 4: Forest<br />
          bit 5: Dungeon<br />
          bit 6: Extended night<br />
          bit 7: Can rest indoors<br />
        </div>
        <br />
        <div class="unknown">PST areaflags are unknown.</div>
      </td>
    </tr>
    <tr>
      <td>0x004a</td>
      <td>2 (word)</td>
      <td>Rain probability</td>
    </tr>
    <tr>
      <td>0x004c</td>
      <td>2 (word)</td>
      <td>Snow probability</td>
    </tr>
    <tr>
      <td>0x004e</td>
      <td>2 (word)</td>
      <td>Fog probability - not implemented</td>
    </tr>
    <tr>
      <td>0x0050</td>
      <td>2 (word)</td>
      <td>Lightning probability</td>
    </tr>
    <tr>
      <td>0x0052</td>
      <td>2 (word)</td>
      <td><div class="unknown">Unknown. Always zero, except in BG1/ToTSC outdoor areas</div></td>
    </tr>
    <tr>
      <td>0x0054</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Actor">actors</a> (i.e. creatures and NPCs).</td>
    </tr>
    <tr>
      <td>0x0058</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Actor">actors</a> in this area (i.e. creatures and NPCs).</td>
    </tr>
    <tr>
      <td>0x005a</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Info">info points, trigger points, and exits</a> in this area.</td>
    </tr>
    <tr>
      <td>0x005c</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Info">info points, trigger points, and exits</a>.</td>
    </tr>
    <tr>
      <td>0x0060</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Spawn">spawn points</a>.</td>
    </tr>
    <tr>
      <td>0x0064</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Spawn">spawn points</a>.</td>
    </tr>
    <tr>
      <td>0x0068</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Entrance">entrances</a>.</td>
    </tr>
    <tr>
      <td>0x006c</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Entrance">entrances</a>.</td>
    </tr>
    <tr>
      <td>0x0070</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Container">containers</a>.</td>
    </tr>
    <tr>
      <td>0x0074</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Container">containers</a>.</td>
    </tr>
    <tr>
      <td>0x0076</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Item">items</a>.</td>
    </tr>
    <tr>
      <td>0x0078</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Item">items</a>.</td>
    </tr>
    <tr>
      <td>0x007c</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Vertices">vertices</a>.</td>
    </tr>
    <tr>
      <td>0x0080</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">vertices</a>.</td>
    </tr>
    <tr>
      <td>0x0082</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Ambient">ambients</a> (i.e. ambient sounds).</td>
    </tr>
    <tr>
      <td>0x0084</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Ambient">ambients</a>.</td>
    </tr>
    <tr>
      <td>0x0088</td>
      <td>4 (dword)</td>
      <td>Offset of <a href="#formAREAV1_0_Variable">variables</a>.</td>
    </tr>
    <tr>
      <td>0x008c</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Variable">variables</a>.</td>
    </tr>
    <tr>
      <td>0x0090</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown, unused ? Set to zero in BG1/ToTSC/BG2/IWD/PST</span></td>
    </tr>
    <tr>
      <td>0x0094</td>
      <td>8 (resref)</td>
      <td>Area Script reference</td>
    </tr>
    <tr>
      <td>0x009c</td>
      <td>4 (dword)</td>
      <td><a href="#formAREAV1_0_Explored">&quot;Explored&quot; bitmask</a> size</td>
    </tr>
    <tr>
      <td>0x00a0</td>
      <td>4 (dword)</td>
      <td>Offset to <a href="#formAREAV1_0_Explored">&quot;explored&quot; bitmask</a></td>
    </tr>
    <tr>
      <td>0x00a4</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Door">doors</a> in this area</td>
    </tr>
    <tr>
      <td>0x00a8</td>
      <td>4 (dword)</td>
      <td>Offset to <a href="#formAREAV1_0_Door">doors</a> structures.</td>
    </tr>
    <tr>
      <td>0x00ac</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Anim">animations</a> in this area.</td>
    </tr>
    <tr>
      <td>0x00b0</td>
      <td>4 (dword)</td>
      <td>Offset to <a href="#formAREAV1_0_Anim">animation</a> structures.</td>
    </tr>
    <tr>
      <td>0x00b4</td>
      <td>4 (dword)</td>
      <td><a href="#formAREAV1_0_TiledObj">Tiled object</a> count</td>
    </tr>
    <tr>
      <td>0x00b8</td>
      <td>4 (dword)</td>
      <td><a href="#formAREAV1_0_TiledObj">Tiled objects</a> offset</td>
    </tr>
    <tr>
      <td>0x00bc</td>
      <td>4 (dword)</td>
      <td>Offset to <a href="#Songs entries">Songs entries</a> of the area</td>
    </tr>
    <tr>
      <td>0x00c0</td>
      <td>4 (dword)</td>
      <td>Offset to interruption of rest party option section </td>
    </tr>
    <tr>
      <td>0x00c4</td>
      <td>4 (dword)</td>
      <td>PST: 0xFFFFFFFF<br /><br />
          Other: Offset of the <a href="#formAREAV1_0_Automap">automap note</a> section, if any</td>
    </tr>
    <tr>
      <td>0x00c8</td>
      <td>4 (dword)</td>
      <td>PST: Offset of the <a href="#formAREAV1_0_Automap">automap note</a> section, if any</span><br /><br />
          Other: Number of entries in the <a href="#formAREAV1_0_Automap">automap note</a> section</td>
    </tr>
    <tr>
      <td>0x00cc</td>
      <td>4 (dword)</td>
      <td>PST: Number of entries in the <a href="#formAREAV1_0_Automap">automap note</a> section<br /><br />
          Other: Offset to the <a href="#formAREAV1_0_ProjTraps">projectile traps</a> section, if any</td>
    </tr>
    <tr>
      <td>0x00d0</td>
      <td>4 (dword)</td>
      <td>Number of entries in the <a href="#formAREAV1_0_ProjTraps">projectile traps</a> section, if any</td>
    </tr>
    <tr>
      <td>0x00d4</td>
      <td>4*18 (dword)</td>
      <td><span class="unknown">Unknown,unused</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Actor">V1.0 Actors</a></div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of this actor (for editors)</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (point)</td>
      <td>Current position of this actor within the area.</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (point)</td>
      <td>Current destination of this actor within the area.</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td>Flags:
        <div class="indent1">
          bit 0: CRE attached (0=yes,1=no)<br />
          <span class="unknown">bit 1: Unknown</span><br />
          <span class="unknown">bit 2: Unknown</span><br />
          bit 3: Actor Name as Death Variable<br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td>4 (dword)</td>
      <td>Spawned flag (0=no, 1=yes). Used in memory.</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Animation.</span></td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Actor orientation. 0-15, starting south and incrementing clockwise.</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown. Usually FFFF FFFF, small values prevent actor appearance?</span></td>
    </tr>
    <tr>
      <td>0x003c</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown (usually 0), unused (no effects in game) ?</span></td>
    </tr>
    <tr>
      <td>0x0040</td>
      <td>4 (dword)</td>
      <td>Actor appearence info. Bits 0-23 each represent an hour of game time. Setting a  bit to 1 means the actor will appear in the area for the corresponding hour. <br />
          Hours appear to be offset by 30 minutes as follows:<br />
      <div class="indent1">
        bit 23 = 23:30 to 00:29<br />
        bit 22 = 22:30 to 23:29<br />
        bit 21 = 21:30 to 22:29 (Night)<br />
        bit 20 = 20:30 to 21:29 (Dusk)<br />

        bit 19 = 19:30 to 20:29<br />
        bit 18 = 18:30 to 19:29<br />
        bit 17 = 17:30 to 18:29<br />
        bit 16 = 16:30 to 17:29<br />

        bit 15 = 15:30 to 16:29<br />
        bit 14 = 14:30 to 15:29<br />
        bit 13 = 13:30 to 14:29<br />
        bit 12 = 12:30 to 13:29<br />

        bit 11 = 11:30 to 12:29<br />
        bit 10 = 10:30 to 11:29<br />
        bit 9 = 09:30 to 10:29<br />
        bit 8 = 08:30 to 09:29<br />

        bit 7 = 07:30 to 08:29<br />
        bit 6 = 06:30 to 07:29 (Day)<br />
        bit 5 = 05:30 to 06:29 (Dawn)<br />
        bit 4 = 04:30 to 05:29<br />

        bit 3 = 03:30 to 04:29<br />
        bit 2 = 02:30 to 03:29<br />
        bit 1 = 01:30 to 02:29<br />
        bit 0 = 00:30 to 01:29<br />
      </div>
      </td>
    </tr>
    <tr>
      <td>0x0044</td>
      <td>4 (dword)</td>
      <td>Number times the actor has been spoken to (in SAV files).</td>
    </tr>
    <tr>
      <td>0x0048</td>
      <td>8 (resref)</td>
      <td>Dialog (overrides dialog assigned in cre file).</td>
    </tr>
    <tr>
      <td>0x0050</td>
      <td>8 (resref)</td>
      <td>Script (Override).</td>
    </td>
    </tr>
    <tr>
      <td>0x0058</td>
      <td>8 (resref)</td>
      <td>Script (Class).</td>
    </tr>
    <tr>
      <td>0x0060</td>
      <td>8 (resref)</td>
      <td>Script (Race).</td>
    </tr>
    <tr>
      <td>0x0068</td>
      <td>8 (resref)</td>
      <td>Script (General).</td>
    </tr>
    <tr>
      <td>0x0070</td>
      <td>8 (resref)</td>
      <td>Script (Default).</td>
    </tr>
    <tr>
      <td>0x0078</td>
      <td>8 (resref)</td>
      <td>Script (Specific).</td>
    </tr>
    <tr>
      <td>0x0080</td>
      <td>8 (resref)</td>
      <td>CRE file.</td>
    </tr>
    <tr>
      <td>0x0088</td>
      <td>4 (dword)</td>
      <td>Offset to CRE structure (stored if the status of this creature is changed from its original status in the CRE file)</td>
    </tr>
    <tr>
      <td>0x008c</td>
      <td>4 (dword)</td>
      <td>Size of stored CRE structure</td>
    </tr>
    <tr>
      <td>0x0090</td>
      <td>128 (bytes)</td>
      <td>Unknown. Unused? Memory placeholders?</td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Info">V1.0 Info points, trigger points, and exits</a></div>
<br />
<div class="indent1">
NB: These are referred to as info points. A more appropriate name might be &quot;active regions&quot;; the name &quot;Info point&quot; comes from the names seen in the file as assigned to the various objects. Likely, the Bioware editors automatically name these as &quot;Info point 1&quot;, &quot;Info point 2&quot;, ..., and &quot;Trigger point 1&quot;, &quot;Trigger point 2&quot;, ..., and &quot;toXXXX&quot;, where XXXX is replaced with the 4-digit area specifier (i.e. AR2600 == 2600, etc). This can be seen in that many of the names will appear as &quot;Name1\0oint 3&quot; -- i.e. the old name can be seen, only having been partially overwritten. Anyway, some of the objects are, in fact, info points, but many of them are exits or &quot;trigger points&quot; (e.g. traps and other special regions). This section has C4h bytes.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of this info point (for editors)</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>2 (word)</td>
      <td>Type of this &quot;trigger point&quot;:
        <div class="indent1">
          0: Proximity trigger<br />
          1: Info trigger (sign, point of notice, etc)<br />
          2: Travel trigger<br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x0022</td>
      <td>8 (rect)</td>
      <td>Minimum bounding box of this point.</td>
    </tr>
    <tr>
      <td>0x002a</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">vertices</a> composing the
        perimeter of this info point.</td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Vertices">vertex</a> for this
        info point.</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown. (usually 0)</span></td>
    </tr>
    <tr class="unc">
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Index of cursor to use for this region (i.e. usually '22' for info point, '28' for inside exits, '30' for outside exits). This resource taken from cursors.bam&nbsp; that is the part of GUIbam.bif&nbsp; file. The frame number to use for the cursor.</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>8 (resref)</td>
      <td>Resref of the destination area, if this is an exit. Unused for other object types.</td>
    </tr>
    <tr>
      <td>0x0040</td>
      <td>32 (char array)</td>
      <td>Name of the <a href="#formAREAV1_0_Entrance">entrance</a> within the destination area where we will appear if we pass through this door. Only used for &quot;exit&quot; objects.</td>
    </tr>
    <tr>
      <td>0x0060</td>
      <td>4 (dword)</td>
      <td>Flags:
        <div class="indent1">
          bit 0: Invisible trap<br />
          bit 1: Reset trap (for proximity triggers)<br />
          bit 2: Party Required flag (for travel triggers)<br />
          bit 3: Detectable<br />
          <span class="unknown">bit 4: Unknown </span><br />
          <span class="unknown">bit 5: Unknown </span><br />
          bit 6: NPC can trigger<br />
          <span class="unknown">bit 7: Unknown </span><br />
          bit 8: Deactivated (for proximity triggers)<br />
          bit 9: NPC cant pass (for travel triggers)<br />
          <span class="unknown">bit 10: Alternative Point</span><br />
          <span class="unknown">bit 11: Used by door? </span><br />
          <span class="unknown">bit 12: Unknown </span><br />
          <span class="unknown">bit 13: Unknown </span><br />
          <span class="unknown">bit 14: Unknown </span><br />
          <span class="unknown">bit 15: Unknown </span><br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x0064</td>
      <td>4 (strref)</td>
      <td>The text associated with this &quot;info point&quot;, if this is actually an &quot;info point&quot; (i.e. if type==01).</td>
    </tr>
    <tr>
      <td>0x0068</td>
      <td>2 (word)</td>
      <td>Trap detection difficulty (%)</td>
    </tr>
    <tr>
      <td>0x006a</td>
      <td>2 (word)</td>
      <td>Trap removal difficulty (%)</td>
    </tr>
    <tr>
      <td>0x006c</td>
      <td>2 (word)</td>
      <td>Trapped flag :
        <div class="indent1">
          bit 0: Whether there is a trap (value 1) or not (value 0)<br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x006e</td>
      <td>2 (word)</td>
      <td>Trap detected flag</td>
    </tr>
    <tr>
      <td>0x0070</td>
      <td>4 (point)</td>
      <td>&quot;trap launch&quot; location.</td>
    </tr>
    <tr>
      <td>0x0074</td>
      <td>8 (bytes)</td>
      <td><span class="unknown">Key type (usage unknown)</span></td>
    </tr>
    <tr>
      <td>0x007c</td>
      <td>8 (resref)</td>
      <td>The script associated with this region, if it is a &quot;trigger point&quot;. This script is activated when a member of your party passes over one of the edges of the polygon defining this region.</td>
    </tr>
    <tr>
      <td>0x0084</td>
      <td>8 (rect)</td>
      <td>Alternative use point</td>
    </tr>
    <tr>
      <td>0x0092</td>
      <td>40 (bytes)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x00b4</td>
      <td>4 (point)</td>
      <td><span class="unknown">Unknown.</span></td>
    </tr>
    <tr>
      <td>0x00b8</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown.</span></td>
    </tr>
    <tr>
      <td>0x00bc</td>
      <td>8 (resref)</td>
      <td>Dialog file <span class="unknown">PST only?</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Spawn">V1.0 Spawn points</a></div>
<br />
<div class="indent1">
This section has C8 (200) bytes.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of this spawn point (this is the full name)</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (point)</td>
      <td>The &quot;location&quot; of this spawn point</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>8*10 (resref array)</td>
      <td>Resref of up to 10 creature types that could be put in the
        area</td>
    </tr>
    <tr>
      <td>0x0074</td>
      <td>2 (word)</td>
      <td>Number of creature types in this spawn point section.</td>
    </tr>
    <tr>
      <td>0x0076</td>
      <td>2 (word)</td>
      <td>Base creature number to spawn. The actual number to spawn is given by:<br />
        <div class="indent1">
          (Frequency * Player Level) / Creature Power.<br />
        </div>
      With results rounded down.
      </td>
    </tr>
    <tr>
      <td>0x0078</td>
      <td>2 (word)</td>
      <td>Time intervals (in seconds) between creatures spawn.</td>
    </tr>
    <tr>
      <td>0x007a</td>
      <td>2 (word)</td>
      <td>Spawn method. (1=Rest,2=Revealed)</td>
    </tr>
    <tr>
      <td><span class="unknown">0x007c</span></td>
      <td><span class="unknown">4 (dword)</span></td>
      <td><span class="unknown">Unknown. 0 value disables spawn point.</span></td>
    </tr>
    <tr>
      <td><span class="unknown">0x0080</span></td>
      <td><span class="unknown">2 (word)</span></td>
      <td><span class="unknown">Unknown. Usu. same as 0x0082.</span></td>
    </tr>
    <tr>
      <td><span class="unknown">0x0082</span></td>
      <td><span class="unknown">2 (word)</span></td>
      <td><span class="unknown">Unknown. Usu. same as 0x0080.</span></td>
    </tr>
    <tr>
      <td>0x0084</td>
      <td>2 (word)</td>
      <td>The maximum number of spawned creatures.</td>
    </tr>
    <tr>
      <td>0x0086</td>
      <td>2 (word)</td>
      <td>Active flag. (0=Inactive, 1=Active)</td>
    </tr>
    <tr>
      <td>0x0088</td>
      <td>4 (dword)</td>
      <td>Spawn point appearence info. Bits 0-23 each represent an hour of game time. Setting a 
      bit to 1 means the spawn point will be active in the area for the corresponding hour. <br /> Hours appear to
      be offset by 30 minutes as follows:<br />
      <div class="indent1">
        bit 23 = 23:30 to 00:29<br />
        bit 22 = 22:30 to 23:29<br />
        bit 21 = 21:30 to 22:29 (Night)<br />
        bit 20 = 20:30 to 21:29 (dusk)<br />

        bit 19 = 19:30 to 20:29<br />
        bit 18 = 18:30 to 19:29<br />
        bit 17 = 17:30 to 18:29<br />
        bit 16 = 16:30 to 17:29<br />

        bit 15 = 15:30 to 16:29<br />
        bit 14 = 14:30 to 15:29<br />
        bit 13 = 13:30 to 14:29<br />
        bit 12 = 12:30 to 13:29<br />

        bit 11 = 11:30 to 12:29<br />
        bit 10 = 10:30 to 11:29<br />
        bit 9 = 09:30 to 10:29<br />
        bit 8 = 08:30 to 09:29<br />

        bit 7 = 07:30 to 08:29<br />
        bit 6 = 06:30 to 07:29 (Day)<br />
        bit 5 = 05:30 to 06:29 (Dawn)<br />
        bit 4 = 04:30 to 05:29<br />

        bit 3 = 03:30 to 04:29<br />
        bit 2 = 02:30 to 03:29<br />
        bit 1 = 01:30 to 02:29<br />
        bit 0 = 00:30 to 01:29<br />
      </div>
      </td>
    </tr>
    <tr>
      <td>0x008c</td>
      <td>2 (word)</td>
      <td><span class="unknown">Day chance? Usu. value 64h (100)</span></td>
    </tr>
    <tr>
      <td>0x008e</td>
      <td>2 (word)</td>
      <td><span class="unknown">Night chance? Usu. value 64h (100)</span></td>
    </tr>
    <tr>
      <td>0x0090</td>
      <td>56 (word)</td>
      <td><span class="unknown">Unknown. Unused.</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Entrance">V1.0 Entrances</a></div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of this entrance -- as referenced by exits which lead to this
        entrance (specified in the source area's <a href="#formAREAV1_0_Info">Info
        points, trigger points, and exits</a> section.</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (point)</td>
      <td>The &quot;location&quot; of this entrance -- when you enter the area
        via this entrance, where does your party actually appear?</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>2 (word)</td>
      <td>The direction of the entrance</td>
    </tr>
    <tr>
      <td>0x0026</td>
      <td>62 (bytes)</td>
      <td><span class="unknown">Unknown, unused</span>.</td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Container">V1.0 Containers</a></div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of this container -- Probably only used by the editor, since the         name makes it fairly obvious which containers are trapped.</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (point)</td>
      <td>Location of this container.&nbsp; It's the point where the character goes to open or disarm a container.</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>2 (word)</td>
      <td>Container type:
        <ul>
          <li>00: &lt;n/a&gt;
          <li>01: BAG
          <li>02: CHEST
          <li>03: DRAWER
          <li>04: PILE
          <li>05: TABLE
          <li>06: SHELF
          <li>07: ALTAR
          <li>08: NONVISIBLE
          <li>09: SPELLBOOK
          <li>0a: BODY
          <li>0b: BARREL
          <li>0c: CRATE</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0026</td>
      <td>2 (word)</td>
      <td>Lock difficulty</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td>Flags: <br />
        <div class="indent1">
          bit 0: Locked<br />
          <span class="unknown">bit 1: Unknown</span><br />
          <span class="unknown">bit 2: Unknown</span><br />
          bit 3: Reset Trap<br />
          <span class="unknown">bit 4: Unknown</span><br />
          bit 5: Disabled<br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td>2 (word)</td>
      <td>Trap detection difficulty</td>
    </tr>
    <tr>
      <td>0x002e</td>
      <td>2 (word)</td>
      <td>Trap removal difficulty</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>2 (word)</td>
      <td>Container is trapped (0 if not , 1 otherwise)</td>
    </tr>
    <tr>
      <td>0x0032</td>
      <td>2 (word)</td>
      <td>Trap has been detected (trap is visible 1, 0 otherwise)</td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (point)</td>
      <td>Trap launch target</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>8 (rect)</td>
      <td>Minimum bounding box of container polygon</td>
    </tr>
    <tr>
      <td>0x0040</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Item">item</a> in this
        container.</td>
    </tr>
    <tr>
      <td>0x0044</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Item">items</a> in this container.</td>
    </tr>
    <tr>
      <td>0x0048</td>
      <td>8 (resref)</td>
      <td>Resref of script to trigger if container trap is set off.</td>
    </tr>
    <tr>
      <td>0x0050</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Vertices">vertex</a> making up
        the outline of this container.</td>
    </tr>
    <tr>
      <td>0x0054</td>
      <td>4 (dword)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">vertices</a> making up the
        outline of this container.</td>
    </tr>
    <tr>
      <td>0x0058</td>
      <td>32 (bytes)</td>
      <td><span class="unknown">Unknown, probably name of trap trigger that could be used in scripts? In IWD, there are some
        containers that have a resref to a cre file.Take a look at AR1008.ARE
        for example but i haven't find yet any function for this. Maybe a
        &quot;awaken&quot; function linking a container to a particular NPC that
        was never use because of scripting?</span></td>
    </tr>
    <tr>
      <td>0x0078</td>
      <td>8 (resref)</td>
      <td>Resref of a &quot;key&quot; item,
        which, if possessed allows this chest to be opened.</td>
    </tr>
    <tr>
      <td>0x0080</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown, unused</span>.</td>
    </tr>
    <tr>
      <td>0x0084</td>
      <td>4 (dword)</td>
      <td>TLK ref that is displayed when a lockpicking is attempted upon a container that couldn't be unlock (lock strength set to 100 or item needed). Only tested in BG II</td>
    </tr>
    <tr>
      <td>0x0088</td>
      <td>56 (bytes)</td>
      <td><span class="unknown">Unknown, unused</span>.</td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Item">V1.0 Items</a></div>
<br />
<div class="indent1">
For those of you that have been paying attention, you may recognize this struct as being used in both the CRE file and the STO file.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>8 (resref)</td>
      <td>Resref of the ITM resource for this particular item.</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x000a</td>
      <td>2 (word)</td>
      <td>Usage 1 (typically the number of stacked items or the number of uses
        of the primary facility of a magical item)</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>2 (word)</td>
      <td>Usage 2 (typically the number of uses of the secondary facility of a
        magical item)</td>
    </tr>
    <tr>
      <td>0x000e</td>
      <td>2 (word)</td>
      <td>Usage 3 (typically the number of uses of the tertiary facility of a
        magical item)</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td>Flags:
        <div class="indent1">
          bit 0: Identified<br />
          bit 1: Unstealable<br />
          bit 2: Stolen<br />
          bit 3: Undroppable<br />
        </div>
      </td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Vertices">V1.0 Vertices</a></div>
<br />
<div class="indent1">
This is an array of points which are used to create the outlines of trigger/info/exit regions and for containers. Not much else to say. Lots of 16-bit words stored x0, y0, x1, y1...<br />
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Ambient">V1.0 Ambients</a></div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of ambient entry.</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (point)</td>
      <td width="363">Origin point of this sound</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>2 (word)</td>
      <td width="363">The radius of this sound.</td>
    </tr>
    <tr>
      <td>0x0026</td>
      <td>2 (bytes)</td>
      <td>Height of this sound.</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>6 (bytes)</td>
      <td width="363"><span class="unknown">Unknown, usually zero.</span></td>
    </tr>
    <tr>
      <td>0x002e</td>
      <td>2 (word)</td>
      <td>Volume of this sound (i.e. as a percentage of the maximum)</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>8*10 (resref array)</td>
      <td>Resref of up to 10 sounds. Sounds are played in order.</td>
    </tr>
    <tr>
      <td>0x0080</td>
      <td>2 (word)</td>
      <td width="363">Number of sounds in the array of sound resource at 0x30</td>
    </tr>
    <tr>
      <td>0x0082</td>
      <td>2 (word)</td>
      <td><span class="unknown">Number of sounds in the array of sound resource at 0x30 or zero, exact purpose unknown.</span></td>
    </tr>
    <tr>
      <td>0x0084</td>
      <td>4 (dword)</td>
      <td>Base time (seconds) between sounds from this ambient list</td>
    </tr>
    <tr>
      <td>0x0088</td>
      <td>4 (dword)</td>
      <td>Base time deviation. Time between the start of consecutive sounds uses a uniform distribution over the range (0x0084 - 0x0088) and (0x0084 + 0x0088).</td>
    </tr>
    <tr>
      <td>0x008c</td>
      <td>4 (dword)</td>
      <td width="363">Ambience appearence info. Bits 0-23 each represent an hour of game time. Setting a 
      bit to 1 means the actor will appear in the area for the corresponding hour. <br /> Hours appear to
      be offset by 30 minutes as follows:<br />
      <div class="indent1">
        bit 23 = 23:30 to 00:29<br />
        bit 22 = 22:30 to 23:29<br />
        bit 21 = 21:30 to 22:29 (Night)<br />
        bit 20 = 20:30 to 21:29 (dusk)<br />

        bit 19 = 19:30 to 20:29<br />
        bit 18 = 18:30 to 19:29<br />
        bit 17 = 17:30 to 18:29<br />
        bit 16 = 16:30 to 17:29<br />

        bit 15 = 15:30 to 16:29<br />
        bit 14 = 14:30 to 15:29<br />
        bit 13 = 13:30 to 14:29<br />
        bit 12 = 12:30 to 13:29<br />

        bit 11 = 11:30 to 12:29<br />
        bit 10 = 10:30 to 11:29<br />
        bit 9 = 09:30 to 10:29<br />
        bit 8 = 08:30 to 09:29<br />

        bit 7 = 07:30 to 08:29<br />
        bit 6 = 06:30 to 07:29 (Day)<br />
        bit 5 = 05:30 to 06:29 (Dawn)<br />
        bit 4 = 04:30 to 05:29<br />

        bit 3 = 03:30 to 04:29<br />
        bit 2 = 02:30 to 03:29<br />
        bit 1 = 01:30 to 02:29<br />
        bit 0 = 00:30 to 01:29<br />
      </div>
      </td>
    </tr>
    <tr>
      <td>0x0090</td>
      <td>4 (dword)</td>
      <td>Flags
        <div class="indent1">
          bit 0: (0) Ambient disabled / (1) Ambient enabled<br />
          bit 1: <span class="unknown">Reverb</span><br />
          bit 2: (0) Local (uses radius) / (1) Global (ignores radius)<br />
          bit 3: (0) Sequential ambient selection / (1) Random ambient selection<br />
          <span class="unknown">bit 4: Unknown</span><br />
          <span class="unknown">bit 5: Unknown</span><br />
          <span class="unknown">bit 6: Unknown</span><br />
          <span class="unknown">bit 7: Unknown</span><br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x0094</td>
      <td>64 (bytes)</td>
      <td><span class="unknown">Unknown, unused.</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Variable">V1.0 Variables</a></div>
<br />
<div class="indent1">
Each area can have associated variables. Variables not associated with an
area are associated with either &quot;GLOBAL&quot; for global variables, or
&quot;LOCALS&quot; for local variables. This stores variables associated with
this particular area (this is keyed on the resref of this area, which is assumed
to be a 6 character code, even though a resref is 8 characters long). For
instance, the variable accessed via 'Global(&quot;AR2600&quot;,&quot;FooBarDead&quot;)'
would be stored in the ARE file for AR2600. Typically these blocks are found
only in saved ARE files (i.e. extracted from .SAV files.). The structure, as
much as is known, is:<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th width="91">Offset</th>
      <th>Size (data type)</th>
      <th width="332">Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td width="91">0x0000</td>
      <td>32 (char array)</td>
      <td width="332">Name of this variable.</td>
    </tr>
    <tr>
      <td width="91">0x0020</td>
      <td>8 (bytes)</td>
      <td width="332"><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td width="91">0x0028</td>
      <td>4 (dword)</td>
      <td width="332">Variable value</td>
    </tr>
    <tr>
      <td width="91">0x002c</td>
      <td>40 (bytes)</td>
      <td width="332"><span class="unknown">Unknown</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Explored">V1.0 Explored bitmask</a></div>
<br />
<div class="indent1">
The explored bitmask is an array of bits, one bit for each 16x16 pixel cell
on the map. If a bit is 1, then the cell has been explored. Otherwise, it has
not.<br />
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Door">V1.0 Doors</a></div>
<br />
<div class="indent1">
Doors in an AREA file are the &quot;door&quot; objects that the user
interacts with, to be distinguished from the &quot;door&quot; objects in the WED
file. The WED file deals with how the opening and closing of a door changes the
appearance of the world. A door in an AREA file details what happens when the
user tries to open the door, what polygon the mouse must be inside of in order
for mouse clicks to affect the door in question. The two types of door objects
are linked through the id field in each -- the 8-byte character array which
contains an identifier for the door. If the names in the two files match, the
doors are the same, and toggling the state of the AREA door will toggle the
state of the WED door.
The name &quot;doors&quot; includes also all possible &quot;secret doors&quot;
that appear on the wall after longer examination of it or using &quot;detect
trap&quot; ability.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>A long name for this door. Could be used by scripts.</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>8 (char array)</td>
      <td>A short identifier for this door. Probably used to establish a mapping
        between doors in the AREA file and doors in the WED file.</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td>Flags related to this door. It probably controlls if door
        is open or closed (since the value is changed in case of opened door)
        But also :<br />
        <div class="indent1">
          bit 0: Door open<br />
          bit 1: Door locked<br />
          bit 2: Reset trap<br />
          bit 3: Trap detectable<br />
          <span class="unknown">bit 4: Broken</span><br />
          <span class="unknown">bit 5: Can't close</span><br />
          bit 6: Linked<br />
          bit 7: Door Hidden<br />
          bit 8: Door Found (if hidden)<br />
          bit 9: Dont block line of sight<br />
          bit 10: Remove Key<br />
          bit 11: Slide<br />
        </div>
        <span class="unknown">Usually values 40, 4a, 42, 4001, 4a01, 4201 for normal doors are used.</span>
      </td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Vertices">vertex</a> comprising
        the outline of this door while the door is open.</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">vertices</a> comprising the
        outline of this door while the door is open.</td>
    </tr>
    <tr>
      <td>0x0032</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">vertices</a> comprising the
        outline of this door while the door is closed.</td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Vertices">vertex</a> comprising
        the outline of this door while the door is closed.</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>8 (rect)</td>
      <td>Minimum bounding box of the door polygon when it is open.</td>
    </tr>
    <tr>
      <td>0x0040</td>
      <td>8 (rect)</td>
      <td>Minimum bounding box of the door polygon when it is closed.</td>
    </tr>
    <tr>
      <td>0x0048</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Vertices">&quot;vertex&quot;</a>
        in &quot;impeded cell block&quot; for &quot;door open&quot; state.
        These vertices are not actually vertices, but instead, cell coordinates
        (each cell corresponding to one tile in the WED file's Tilemap
        structures. When the door is closed, these cells cannot be entered by
        any object.</td>
    </tr>
    <tr>
      <td>0x004c</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">&quot;vertices&quot;</a> in
        &quot;impeded cell block&quot; for &quot;door open&quot; state. See
        note at offset 0x48 in this structure for details.</td>
    </tr>
    <tr>
      <td>0x004e</td>
      <td>2 (word)</td>
      <td>Count of <a href="#formAREAV1_0_Vertices">&quot;vertices&quot;</a> in
        &quot;impeded cell block&quot; for &quot;door closed&quot; state. This is
        the same as the above field, except it is used when the door is open,
        instead of when the door is closed.</td>
    </tr>
    <tr>
      <td>0x0050</td>
      <td>4 (dword)</td>
      <td>Index of first <a href="#formAREAV1_0_Vertices">&quot;vertex&quot;</a>
        in &quot;impeded cell block&quot; for &quot;door closed&quot; state. This
        is the same as the field at 0x48, except it is used when the door is
        open, instead of when the door is closed.</td>
    </tr>
    <tr>
      <td>0x0054</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x0056</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x0058</td>
      <td>2x8 (char array)</td>
      <td>Two resref to sound files. 1st sound plays on door open. 2nd sound plays on door close.</td>
    </tr>
    <tr>
      <td>0x0068</td>
      <td>4 (dword)</td>
      <td>Index into cursors.bam frame - control the cursor shown when hovering over the door.</td>
    </tr>
    <tr>
      <td>0x006c</td>
      <td>2 (word)</td>
      <td>Trap detection difficulty</td>
    </tr>
    <tr>
      <td>0x006e</td>
      <td>2 (word)</td>
      <td>Trap removal difficulty</td>
    </tr>
    <tr>
      <td>0x0070</td>
      <td>2 (word)</td>
      <td>Trapped flag</td>
    </tr>
    <tr>
      <td>0x0072</td>
      <td>2 (word)</td>
      <td>Trap detected flag</td>
    </tr>
    <tr>
      <td>0x0074</td>
      <td>4 (point)</td>
      <td>Trap launch target point</td>
    </tr>
    <tr>
      <td>0x0078</td>
      <td>8 (resref)</td>
      <td>Resref of key item  needed to unlock door.</td>
    </tr>
    <tr>
      <td>0x0080</td>
      <td>8 (resref)</td>
      <td>Resref of script for this item. (Script is activated when &quot;open&quot; attempt is made on item.)</td>
    </tr>
    <tr>
      <td>0x0088</td>
      <td>4 (dword)</td>
      <td>Detection difficulty (secret doors)</td>
    </tr>
    <tr>
      <td>0x008c</td>
      <td>4 (dword)</td>
      <td>Lock difficulty (0-100)</td>
    </tr>
    <tr>
      <td>0x0090</td>
      <td>8 (rect)</td>
      <td>Two points. The player will move to the closest of these to toggle the door state.</td>
    </tr>
    <tr>
      <td>0x0098</td>
      <td>4 (dword)</td>
      <td>Strref - used when picklock attempted on unpickable door.</td>
    </tr>
    <tr>
      <td>0x009c</td>
      <td>32 (bytes)</td>
      <td>Region link.</td>
    </tr>
    <tr>
      <td>0x00bc</td>
      <td>4 (strref)</td>
      <td><span class="unknown">Name of this door, if it has one. Name is used if the door initiates dialog with the user.</span></td>
    </tr>
    <tr>
      <td>0x00c0</td>
      <td>8 (resref)</td>
      <td><span class="unknown">Resref of the dialog resource associated with this door, if any. This dialog will be used if the door initiates dialog with the user in its associated script.</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Anim">V1.0 Animations</a></div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name of animation entry</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (point)</td>
      <td>Centre point of animation</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (dword)</td>
      <td width="363">Animation appearence info. Bits 0-23 each represent an hour of game time. Setting a 
      bit to 1 means the actor will appear in the area for the corresponding hour. <br /> Hours appear to
      be offset by 30 minutes as follows:<br />
      <div class="indent1">
        bit 23 = 23:30 to 00:29<br />
        bit 22 = 22:30 to 23:29<br />
        bit 21 = 21:30 to 22:29 (Night)<br />
        bit 20 = 20:30 to 21:29 (dusk)<br />

        bit 19 = 19:30 to 20:29<br />
        bit 18 = 18:30 to 19:29<br />
        bit 17 = 17:30 to 18:29<br />
        bit 16 = 16:30 to 17:29<br />

        bit 15 = 15:30 to 16:29<br />
        bit 14 = 14:30 to 15:29<br />
        bit 13 = 13:30 to 14:29<br />
        bit 12 = 12:30 to 13:29<br />

        bit 11 = 11:30 to 12:29<br />
        bit 10 = 10:30 to 11:29<br />
        bit 9 = 09:30 to 10:29<br />
        bit 8 = 08:30 to 09:29<br />

        bit 7 = 07:30 to 08:29<br />
        bit 6 = 06:30 to 07:29 (Day)<br />
        bit 5 = 05:30 to 06:29 (Dawn)<br />
        bit 4 = 04:30 to 05:29<br />

        bit 3 = 03:30 to 04:29<br />
        bit 2 = 02:30 to 03:29<br />
        bit 1 = 01:30 to 02:29<br />
        bit 0 = 00:30 to 01:29<br />
      </div>
      </td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>8 (resref)</td>
      <td>The resref of the BAM file to be played for this animation.</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>2 (word)</td>
      <td>Sequence number (number of animation) within the BAM resource</td>
    </tr>
    <tr class="upd">
      <td>0x0032</td>
      <td>2 (word)</td>
      <td>Number of frame within current animation/sequence in the BAM resource</td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Flags:
        <div class="indent1">
          bit 0: (0) Animation disabled / (1) Animation enabled<br />
          bit 1: (0) Render black as black / (1) Render black as transparent<br />
          bit 2: (0) Self illumination / (1) Non-self illumination<br />
          bit 3: (0) Full animation / (1) Partial animation (stops at frame specified at 0x0032)<br />
          bit 4: (0) Non-synchronized draw / (1) Synchronized draw<br />
          <span class="unknown">bit 5: Unknown</span><br />
          bit 6: (0) Wall hides animation / (1) Wall doesn't hide animation <br />
          <span class="unknown">bit 7: (0) Visible in dark / (1) Invisible in dark</span><br />
          bit 8: (0) Cover / (1) Not cover<br />
          bit 9: (0) Don't play all frames / (1) Play all frames<br />
          bit 10: (0) Don't use palette bitmap / (1) Use palatte bitmap<br />
          bit 11: (0) Not mirrored / (1) Mirrored<br />
          bit 12: (0) Hide in combat / (1) Show in combat<br />
          <span class="unknown">bit 13: Unknown</span><br />
          <span class="unknown">bit 14: Unknown</span><br />
          <span class="unknown">bit 15: Unknown</span><br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>2 (word)</td>
      <td>Height</td>
    </tr>
    <tr>
      <td>0x003a</td>
      <td>2 (word)</td>
      <td>Transparency (255 is invisible)</td>
    </tr>
    <tr>
      <td>0x003c</td>
      <td>2 (word)</td>
      <td>Starting frame (0 indicates random frame. Synchronized will clear this)</td>
    </tr>
    <tr>
      <td>0x003e</td>
      <td>1 (byte)</td>
      <td>Chance of looping (0 defaults to 100)</td>
    </tr>
    <tr>
      <td>0x003f</td>
      <td>1 (byte)</td>
      <td>Skip cycles</td>
    </tr>
    <tr>
      <td>0x0040</td>
      <td>8 (resref)</td>
      <td>Palette</td>
    </tr>
    <tr>
      <td>0x0048</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown, unused</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_Automap">V1.0 Automap notes</a></div>
<br />
<div class="indent1">
These are textual notes which either you can add to your map, or which, in
Torment, are automatically added to your map.&nbsp;Section size : 34h bytes.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>2 (word)</td>
      <td>X coordinate</td>
    </tr>
    <tr>
      <td>0x0002</td>
      <td>2 (word)</td>
      <td>Y coordinate</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>strref to dialog.tlk or TOH/TOT files</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>2 (word)</td>
      <td>Strref location (0=extenal (tot/toh), 1=internal (tlk)</span></td>
    </tr>
    <tr>
      <td>0x000a</td>
      <td>2 (word)</td>
      <td>For Baldur's Gate 2 this field specify the color of
        internal side of mark on worldmap :
        <div class="indent1">
          0 - Gray (default value)<br />
          1 - Violet<br />
          2 - Green<br />
          3 - Orange<br />
          4 - Red<br />
          5 - Blue<br />
          6 - Dark Blue<br />
          7 - Light Gray<br />
        </div>
      </td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Note count + 10</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>36 (bytes)</td>
      <td><span class="unknown">Unused</span></td>
    </tr>
  </tbody>
</table>
<br />
For PST:<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (dword)</td>
      <td>X coordinate</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Y coordinate</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>500 (ASCII)</td>
      <td>Text</td>
    </tr>
    <tr>
      <td>0x01fc</td>
      <td>4 (dword)</td>
      <td>Note colour (0 = Blue user note, 1 = Red game note)</td>
    </tr>
    <tr>
      <td>0x0200</td>
      <td>5 * 4 (dword)</td>
      <td><span class="unknown">Unknown, unused</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader"><a name="formAREAV1_0_TiledObj">V1.0 Tiled objects</a></div>
<br />
<div class="indent1">
This information comes from Dmitry Jemerov. Neither of us have seen any
instances of areas which include objects of this type, but he has managed to
determine the format of these objects, nonetheless. Since there are no examples,
we don't know precisely what they are used for. If more information becomes
available, this space will be updated.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>32 (char array)</td>
      <td>Name</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>8 (resref)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x002c</td>
      <td>4 (dword)</td>
      <td>Primary search squares start. The primary search squares are the
        squares which are impeded when the object is in one state (i.e. the
        search squares through which a creature cannot travel).</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>4 (dword)</td>
      <td>Primary search squares count</td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Secondary search squares start. The secondary search squares are like
        the primary search squares, except for when the object is in an
        alternate state of some sort.</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>4 (dword)</td>
      <td>Secondary search squares count</td>
    </tr>
    <tr>
      <td>0x003c</td>
      <td>48 (bytes)</td>
      <td><span class="unknown">Unknown (unused?)</span></td>
    </tr>
  </tbody>
</table>
</div>
<br />

<div class="fileheader">V1.0 <a name="formAREAV1_0_ProjTraps">Projectile traps (BG2)</a></div>
<br />
<div class="indent1">
This section stores information on saved projectiles (e.g. Skull Trap). The length of this sectin seems to be 1A bytes.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>8 (resref)</td>
      <td>Projectile resref</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Effect block offset</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Effect block size</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>2 (word)</td>
      <td>X Position</td>
    </tr>
    <tr>
      <td>0x0016</td>
      <td>2 (word)</td>
      <td>Y Position</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown</span></td>
    </tr>
</table>
</div>
<br />

<div class="fileheader">V1.0 <a name="Songs entries">Songs entries</a></div>
<br />
<div class="indent1">
This sections determines which *.acm files are played in the some situations.
The length of this section is 90h&nbsp; bytes. The first 10 dwords seems to be
numbers of the songs listed in proper files for each game (like SongList.2da
for BG2 and MUSIC.2DA for IWD and SONGS.IDS for PS:T), however there are known only three entries to this list - the rest is
probably unused.<br />
<br />
<table border="1" width="98%">
    <tr>
      <th>Offset</th>
      <th width="107">Size (data type)</th>
      <th width="371">Description</th>
    </tr>
    <tr>
      <td>0x0000</td>
      <td>4 (dword)</td>
      <td>Day song reference number</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Night song reference number</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Win song reference number</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Battle song reference number</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td>Lose song reference number</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4x5 (dword)</td>
      <td><span class="unknown">Unknown. Usually -1.</span></td>
    </tr>
  <tr>
      <td>0x0028</td>
      <td>8 (resref)</td>
      <td>Main day ambient 1 (WAV)</td>
  </tr>
  <tr>
      <td>0x0030</td>
      <td>8 (resref)</td>
      <td>Main day ambient 2 (WAV)</td>
  </tr>
  <tr>
      <td>0x0038</td>
      <td>4 (dword)</td>
      <td>Main day ambient volume %</td>
  </tr>
  <tr>
    <td>0x003c</td>
    <td>8 (resref)</td>
    <td>Main night ambient 1 (WAV)</td>
  </tr>
  <tr>
    <td>0x0044</td>
    <td>8 (resref)</td>
    <td>Main night ambient 2 (WAV)</td>
  </tr>
  <tr>
      <td>0x004c</td>
      <td>4 (dword)</td>
      <td>Main night ambient volume %</td>
  </tr>
  <tr>
    <td>0x0050</td>
    <td>4 (dword)</td>
    <td><span class="unknown">Probably used only in PS: T - I suspect it has the meaning as described in SongFlag.IDS in this game. Check AR1363 and AR1700 (PST)</span>
    </td>
  </tr>
  <tr>
    <td>0x0054</td>
    <td>60 (bytes)</td>
    <td><span class="unknown">Unknown, always 00</span></td>
  </tr>
</table>
</div>
<br />

<div class="fileheader">V1.0 <a name="RestOptionSpawn">Creatures appearance that interrupts party rest</a></div>
<br />
<div class="indent1">
This section determines whether the sleep of the party is interrupted by some creatures spawn or not (i.e. Soldiers in Athkatla that interrupts Party's sleep inside the city, or monsters that appear during the sleep). The length of this section is E4h bytes.<br />
<br />
<table border="1" width="98%">
    <tr>
      <th>Offset</th>
      <th>Size (data type)</th>
      <th>Description</th>
    </tr>
    <tr>
      <td>0x0000</td>
      <td>32 (bytes)</td>
      <td>Name of this section (for editors).</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4x10 (dword)</td>
      <td>Ten strrefs, corresponding to the resrefs in next parts that appears when sleep is interrupted (i.e. 9627 0000 stands for &quot;You are awakened from your rest.&quot;
        )</td>
    </tr>
    <tr>
      <td>0x0048</td>
      <td>8x10 (resref)</td>
      <td>The 10 resref table that contains of the references to the a cre files.</td>
    </tr>
    <tr>
      <td>0x0098</td>
      <td>2 (word)</td>
      <td>Number of cre entries in the references table.</td>
    </tr>
    <tr>
      <td>0x009a</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown. Frequency? Difficulty?</span></td>
    </tr>
    <tr>
      <td>0x009c</td>
      <td>4 (dword)</td>
      <td><span class="unknown">Unknown.</span></td>
    </tr>
    <tr>
      <td>0x00a0</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown.</span></td>
    </tr>
    <tr>
      <td>0x00a2</td>
      <td>2 (word)</td>
      <td><span class="unknown">Unknown, the same value as in offset 0x00a0.</span></td>
    </tr>
    <tr>
      <td>0x00a4</td>
      <td>2 (word)</td>
      <td>Maximum number of spawned creatures.</td>
    </tr>
    <tr>
      <td>0x00a6</td>
      <td>2 (word)</td>
      <td><div class="unknown">Unknown. Usually 1.</div></td>
    </tr>
    <tr>
      <td>0x00a8</td>
      <td>2 (word)</td>
      <td><div class="unknown">Day chance?</div></td>
    </tr>
    <tr>
      <td>0x00aa</td>
      <td>2 (word)</td>
      <td><div class="unknown">Night chance?</div></td>
    </tr>
    <tr>
      <td>0x00ac</td>
      <td>56 (bytes)</td>
      <td><div class="unknown">Unknown, unused. Usually 0.</div></td>
    </tr>
</table>
</div>

</body>
</html>
