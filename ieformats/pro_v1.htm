<html>
<head>
<link rel="stylesheet" type="text/css" href="general.css" />
</head>
<body>
<div class="title_main">PRO file format</div>
<br />
<div class="fileheader">Applies to:</div>
<div class="indent1"> BG2, BG2: ToB </div><br />

<div class="fileheader">General Description</div>
<div class="indent1">
There is not one single PRO file in BG, TotSC, PST, IWD, and HoW, thus they
are available only in BG2 SoA and ToB. The other games have this setting in the
executable.<br />
<br />
PRO files are used for &quot;projectiles&quot; in game. They have no effect as
a standalone file, .pro filenames are given a number in PROJECTL.ids. This
number plus one (zero entry) is used as the animation reference in items or
spells. Projectile files can control:<br />
<div class="indent1">
  <li>Projectile graphics</li>
  <li>Projectile speed</li>
  <li>Projectile area of effect</li>
  <li>Projectile sound</li>
</div>
These files have constant length 512h bytes (single target), or 768 bytes (area effect).
</div>
<br />

<div class="fileheader">Detailed Description</div>
<br />
<div class="indent1">
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (datatype)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
  <tr>
    <td>0x00000</td>
    <td>4 (char array)</td>
    <td>Signature ('PRO ')</td>
  </tr>
  <tr>
    <td>0x00004</td>
    <td>4 (char array)</td>
    <td>Version ('V1.0')</td>
  </tr>
  <tr>
    <td>0x00008</td>
    <td>2 (word)</td>
    <td>Projectile type<br />
      <div class="indent1">
        02 is one target<br />
        03 is area of effect<br />
      </div>
    </td>
  </tr>
  <tr>
    <td>0x0000a</td>
    <td>2 (word)</td>
    <td>Projectile speed (0x01 to 0xFF)</td>
  </tr>
  <tr>
    <td>0x0000c</td>
    <td>2 (word)</td>
    <td>Sparking flag: <br />
      <div class="indent1">
        bit 0: Sparks<br />
        bit 1: Flying projectile<br />
        bit 2: Looping sound<br />
        <span class="unknown">bit 3: Unknown</span><br />
        bit 4: Ignore Centre<br />
  </td>
  </tr>
  <tr>
    <td>0x0000e</td>
    <td>2 (word)</td>
    <td><span class="unknown">Unknown</span></td>
  </tr>
  <tr>
    <td>0x00010</td>
    <td>8 (resref)</td>
    <td><a href="wavc_v1.htm">WAVC file</a> attached to the projectile</td>
  </tr>
  <tr>
    <td>0x00018</td>
    <td>8 (resref)</td>
    <td><a href="wavc_v1.htm">WAVC file</a> attached to the projectile (played on explosion/reach destination)</td>
  </tr>
  <tr>
    <td>0x00020</td>
    <td>8 (resref)</td>
    <td><span class="unknown"><a href="wavc_v1.htm">WAVC file</a> attached to the projectile. Unused?</span></td>
  </tr>
  <tr>
    <td>0x00028</td>
    <td>4 (dword)</td>
    <td>Spark colour:<br />
      <div class="indent1">
        <li>00= Warning: Crashes PC</li>
        <li>01= Black</li>
        <li>02= Blue</li>
        <li>03= Purple and amber</li>
        <li>04= Amber</li>
        <li>05= Pale green</li>
        <li>06= Purple</li>
        <li>07= Pink</li>
        <li>08= Grey</li>
        <li>09= Pale blue (aqua)</li>
        <li>0A= White</li>
        <li>0B= Pale pink</li>
        <li>0C= Gold</li>
      </div>
    </td>
  </tr>
  <tr>
    <td>0x0002c</td>
    <td>212 (byte)</td>
    <td><span class="unknown">Unknown, unused?</span></td>
  </tr>
  <tr>
    <td>0x00100</td>
    <td>4 (dword)</td>
    <td>Flags:
      <div class="indent1">
        bit 0: Enable BAM colouring<br />
        bit 1: Enable smoke<br />
        <span class="unknown"> bit 2: Unknown </span><br />
        bit 3: Darken projectile<br />
        <span class="unknown"> bit 4: Unknown </span><br />
        bit 5: Enable shadow<br />
        bit 6: Enable light spot<br />
        bit 7: Coloured shadow<br />
      </div>
    </td>
  </tr>
  <tr>
    <td>0x00104</td>
    <td>8 (resref)</td>
    <td><a href="bam_v1.htm">BAM file</a> for travelling projectile</td>
  </tr>
  <tr>
    <td>0x0010c</td>
    <td>8 (resref)</td>
    <td><a href="bam_v1.htm">BAM file</a> for projectile shadow</td>
  </tr>
  <tr>
    <td>0x00114</td>
    <td>1 (byte)</td>
    <td>Sequence of the BAM to display as the main projectile (00 is the first, etc...)</td>
  </tr>
  <tr>
    <td>0x00115</td>
    <td>1 (byte)</td>
    <td>Sequence of the BAM to display as the shadow of the projectile (00 is the first, etc...)</td>
  </tr>
  <tr>
    <td>0x00116</td>
    <td>2 (word)</td>
    <td><div class="unknown">Light spot intensity  or Light spot size (Z axis)</div></td>
  </tr>
  <tr>
    <td>0x00118</td>
    <td>1 (byte)</td>
    <td>Light spot size (X axis)</td>
  </tr>
  <tr>
    <td>0x0011a</td>
    <td>2 (word)</td>
    <td>Light spot size (Y axis)</td>
  </tr>
  <tr>
    <td>0x0011c</td>
    <td>8 (resref)</td>
    <td>This is the reference to the <a href="bmp.htm">BMP files</a><br />
        It is used in TRAVEL type BAMs (hold, etc...) and dragon's breath BAMs.<br />
        Color of a TRAVEL type projectile:<br />
      <div class="indent1">
        <li>STTRAVL1= Blue</li>
        <li>STTRAVL2= Yellow</li>
        <li>STTRAVL3= Green</li>
        <li>STTRAVL4= Purple</li>
        <li>STTRAVL5= Pale purple</li>
        <li>STTRAVL6= Pink</li>
        <li>STTRAVL7= Blue</li>
        <li>STTRAVL8= Gold</li>
      </div>
    </td>
  </tr>
  <tr>
    <td>0x00124</td>
    <td>1 (byte)</td>
    <td>Projectile colour</td>
  </tr>
  <tr>
    <td>0x00125</td>
    <td>6 (bytes)</td>
    <td>Projectile colour gradients</td>
  </tr>
  <tr>
    <td>0x0012b</td>
    <td>1 (byte)</td>
    <td>Smoke puff timing</td>
  </tr>
  <tr>
    <td>0x0012c</td>
    <td>1 (byte)</td>
    <td>Smoke colour</td>
  </tr>
  <tr>
    <td>0x0012d</td>
    <td>6 (bytes)</td>
    <td>Smoke colour gradients</td>
  </tr>
  <tr>
    <td>0x00133</td>
    <td>1 (byte)</td>
    <td> <div class="unknown">Face Target Granularity<br />
      <div class="indent1">
        1  : Dont face<br />
        5  : Mirrored eastern directions (reduced granularity)<br />
        9  : Mirrored eastern (full granularity)<br />
        16 : Mot mirrored, not reduced<br />
      </div>
    </div>
    </td>
  </tr>
  <tr>
    <td>0x00134</td>
    <td>2 (short)</td>
    <td>Projectile smoke animation (animate.ids)</td>
  </tr>
  <tr>
    <td>0x00136</td>
    <td>8 (resref)</td>
    <td>Name of the BAM file that follows the main missile (if 0x0014e is set to something other than 00)</td>
  </tr>
  <tr>
    <td>0x0013e</td>
    <td>8 (resref)</td>
    <td>Name of the BAM file that follows the main missile (if 0x00150 is set to something other than 00)</td
  </tr>
  <tr>
    <td>0x00146</td>
    <td>8 (resref)</td>
    <td>Name of the BAM file that follows the main missile (if 0x00152 is set to something other than 00)</td
  </tr>
  <tr>
    <td>0x0014e</td>
    <td>2 (word)</td>
    <td>Frequency of trail BAM1 following the main missile</td
  </tr>
  <tr>
    <td>0x00150</td>
    <td>2 (word)</td>
    <td>Frequency of trail BAM2 following the main missile</td
  </tr>
  <tr>
    <td>0x00152</td>
    <td>2 (word)</td>
    <td>Frequency of trail BAM3 following the main missile</td
  </tr>
  <tr>
    <td>0x00154</td>
    <td>176 (bytes)</td>
    <td><span class="unknown">Unknown, unused</span></td>
  </tr>
</table>
<br />

If projectile is area affect projectile, there is additional section in
the file. It has 100h (256) bytes.<br />
<br />
<table border="1" width="98%">
  <colgroup>
    <col width="5%">
    <col width="12%">
    <col width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (datatype)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
  <tr>
    <td>0x00200</td>
    <td>2 (word)</td>
    <td>AOE target (enemies, allies, enemies/allies).<br />
      <div class="indent1">
        bit 0: Projectile visible<br />
        <span class="unknown"> bit 1: Triggered by inanimate objects (e.g. doors) </span><br />
        bit 2: Triggered on condition<br />
        bit 3: One explosion at a time<br />
        bit 4: Use secondary projectile<br />
        bit 5: Use fragment graphics<br />
        bit 6: Target selection*<br />
        bit 7: Target selection*<br />
        <span class="unknown"> bit 8: Unknown </span><br />
        bit 9: Multiple set off<br />
        bit 10: Use VVC<br />
        bit 11: Cone shape<br />
        <span class="unknown"> bit 12: Unknown </span><br />
        <span class="unknown">bit 13: No explosion</span><br
        <span class="unknown">bit 14: Delayed explosion</span><br />
        <span class="unknown">bit 15: Affect only one target</span><br />
        <br />
        Target selection:<br />
        <div class="indent1">
          00 Affect party, enemies, neutrals<br />
          01 Affect only enemies<br />
          10 Affect party, enemies, neutrals <br />
          11 Affect only party<br />
        </div>
      </div>
    </td>
  </tr>
  <tr>
    <td>0x00202</td>
    <td>2 (word)</td>
    <td><span class="unknown">Unknown</span></td>
  </tr>
  <tr>
    <td>0x00204</td>
    <td>2 (word)</td>
    <td>Trigger radius (divide by approx 8.5 to receive radius in feet)</td>
  </tr>
  <tr>
    <td>0x00206</td>
    <td>2 (word)</td>
    <td>Area of Effect (divide by approx 8.5 to receive radius in feet)</td>
  </tr>
  <tr>
    <td>0x00208</td>
    <td>8 (resref)</td>
    <td>Trigger sound</td>
  </tr>
  <tr>
    <td>0x00210</td>
    <td>2 (word)</td>
    <td>Delay (between explosions)</td>
  </tr>
  <tr>
    <td>0x00212</td>
    <td>2 (short)</td>
    <td>Fragment animation (animate.ids)</td>
  </tr>
  <tr>
    <td>0x00214</td>
    <td>2 (word)</td>
    <td><div span="unknown">Secondary projectile (projectl.ids-1)</span></td>
  </tr>
  <tr>
    <td>0x00216</td>
    <td>1 (byte)</td>
    <td>Duration/Trigger count</td>
  </tr>
  <tr>
    <td>0x00217</td>
    <td>1 (byte)</td>
    <td>Set off animation (fireball.ids)</td>
  </tr>
  <tr>
    <td>0x000218</td>
    <td>1 (byte)</td>
    <td>Color of explosion animation 1st. Not all of the explosion graphics are affected by this offset.</td>
  </tr>
  <tr>
    <td>0x000219</td>
    <td>1 (byte)</td>
    <td><span class="unknown">Unknown</span></td>
  </tr>
  <tr>
    <td>0x00021a</td>
    <td>2 (bytes)</td>
    <td>Explosion projectile (projectl.ids).</td>
  </tr>
  <tr>
    <td>0x00021c</td>
    <td>8 (resref)</td>
    <td>VVC file</td>
  </tr>
  <tr>
    <td>0x000224</td>
    <td>2 (word)</td>
    <td>Width of the cone (if 0x00201 is set to 08 or 09). 00 is the
      smallest, FF is the largest (round).</td>
  </tr>
  <tr>
    <td>0x000226</td>
    <td>218 (bytes)</td>
    <td><span class="unknown">Unknown, unused ?</span></td>
  </tr>
</tbody>
</table>
</div>
</body>
</html>
