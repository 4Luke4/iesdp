---
title: "PRO file format"
---
    <div class="title_main">PRO file format</div>
    <br />
    <div class="fileHeader">Applies to:</div>
    <div class="indent1"> BG2, BG2: ToB, BGEE </div><br />

    <div class="fileHeader">General Description</div>
    <div class="indent1">
      This file format describes projectiles, and the files are referenced spells and projectile weapons. Projectile files can control:<br />
      <ul>
        <li>Projectile graphics</li>
        <li>Projectile speed</li>
        <li>Projectile area of effect</li>
        <li>Projectile sound</li>
      </ul>
      These files have constant length 256 bytes (no BAM), 512 bytes (single target), or 768 bytes (area of effect).
    </div>
    <br />

    <div class="fileHeader">Detailed Description</div>
    <div class="indent1">
      <br />
      <table border="1" width="98%">
        <colgroup>
          <col width="5%" />
          <col width="12%" />
           <col width="*" />
        </colgroup>
        <thead>
          <tr>
            <th>Offset</th>
            <th>Size (datatype)</th>
            <th>Description</th>
          </tr>
        </thead>
        <tbody>
        <tr>
          <td>0x00000</td>
          <td>4 (char array)</td>
          <td>Signature ('PRO ')</td>
        </tr>
        <tr>
          <td>0x00004</td>
          <td>4 (char array)</td>
          <td>Version ('V1.0')</td>
        </tr>
        <tr>
          <td>0x00008</td>
          <td>2 (word)</td>
          <td><a name="0x8">Projectile Type</a><br />
            <ul>
              <li>1 no BAM</li>
              <li>2 single target</li>
              <li>3 area of effect</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x0000a</td>
          <td>2 (word)</td>
          <td><a name="0xA">Projectile Speed</a> (0x01 to 0xFF)</td>
        </tr>
        <tr>
          <td>0x0000c</td>
          <td>4 (dword)</td>
          <td>Sparking flags
            <ul>
              <li>bit 0: Show sparkle</li>
              <li>bit 1: <a name="#Behavior_BIT1">Use z coordinate</a></li>
              <li>bit 2: Loop sound (0x10)</li>
              <li>bit 3: Loop sound (0x18)</li>
              <li>bit 4: Do not affect direct target (a.k.a. exclude caster)</li>
              <li>bit 5: Draw below animate objects</li>
              <li>bit 6: Allow saving game (EE)</li>
              <li>bit 7: Loop spread animation (EE)</li>
            </ul>
            Further bits are unused.
          </td>
        </tr>
        <tr>
          <td>0x00010</td>
          <td>8 (resref)</td>
          <td><a href="wavc_v1.htm">WAVC file</a> (travelling)</td>
        </tr>
        <tr>
          <td>0x00018</td>
          <td>8 (resref)</td>
          <td><a href="wavc_v1.htm">WAVC file</a> (explosion/reach destination)</td>
        </tr>
        <tr>
          <td>0x00020</td>
          <td>8 (resref)</td>
          <td>Travelling <a href="vef_v1.htm">VEF</a>/<a href="vvc_v1.htm">VVC</a>/<a href="bam_v1.htm">BAM</a></td>
        </tr>
        <tr>
          <td>0x00028</td>
          <td>2 (word)</td>
          <td>Spark colour (from <a href="../../files/2da/2da_bgee/sprklclr.htm">SPRKCLR.2DA</a>)
            <ul>
              <li>0 = Crashes</li>
              <li>1 = Black</li>
              <li>2 = Blue</li>
              <li>3 = Chromatic</li>
              <li>4 = Gold</li>
              <li>5 = Green</li>
              <li>6 = Purple</li>
              <li>7 = Red</li>
              <li>8 = White</li>
              <li>9 = Ice</li>
              <li>10 = Stone</li>
              <li>11 = Magenta</li>
              <li>12 = Orange</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td colspan="3"><b>The following fields are used by Enhanced Editions games only:</b></td>
        </tr>
        <tr>
          <td>0x0002a</td>
          <td>2 (word)</td>
          <td><a name="0x2A">Projectile Width</a></td>
        </tr>
        <tr>
          <td>0x0002c</td>
          <td>4 (dword)</td>
          <td>Extended flags
            <ul>
              <li>
                Bit 0: <a name="ExtFlags_BIT0">Bounce from walls</a>
                <ul>
                  <li>
                    When <a href="#0x8">Projectile Type</a> is <code>2|Single Target</code>:
                    <ul>
                      <li>Compatibility: only functions in combination with <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                    </ul>
                  </li>
                  <li>
                    When <code><a href="#0x8">Projectile Type</a></code> is <code>3|Area Effect</code>:
                    <ul>
                      <li>
                        Dependency: Spell Target(<code>Creature</code>)
                        <ul>
                          <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to deliver effects (normally it does not).</li>
                          <li>Alters the <code><a href="#0x214">Secondary Projectile</a></code> to originate from the targeted creature, rather than the caster.</li>
                          <li>The <code><a href="#0x214">Secondary Projectile</a></code> still requires <code><a href="#AreaFlags_BIT4">Secondary Projectile</a></code>.</li>
                          <li>The <code><a href="#0x214">Secondary Projectile</a></code> will be oriented in a random direction.</li>
                          <li>Compatibility: with <code><a href="#AreaFlags_BIT11">Cone Shaped</a></code>, the <code><a href="#0x214">Secondary Projectile</a></code> will instead target the caster's location (but not the caster directly).</li>
                          <li>
                            The Traveling Projectile of the <code><a href="#0x214">Secondary Projectile</a></code> will terminate after a number of ticks equal to <code><a href="#0x210">Explosion Frequency</a></code>.
                            <ul>
                              <li>It will need to impact (<code>2|Single Target</code>) or explode (<code>3|Area Effect</code>) before then.</li>
                              <li>Compatibility: projectiles using <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> travel for their normal distance/duration.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 1: <a name="ExtFlags_BIT1">Pass target</a>
                <ul>
                  <li>Projectile travels in straight line (is not homing), hitting all creatures within range of its current location every <code>2</code> ticks.</li>
                  <li>Compatibility: <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code> functions as normal except that it will not arc this projectile.</li>
                  <li>
                    Priority:
                    <ul>
                      <li>Suppressed by <code><a href="#AreaFlags_BIT11">Cone Shaped</a></code></li>
                      <li>Suppressed by or incompatible with <code><a href="#ExtFlags_BIT12">Falling Path</a></code> or <code><a href="#ExtFlags_BIT13">Comet</a></code></li>
                    </ul>
                  </li>
                  <li>
                    Suppresses:
                    <ul>
                      <li><code><a href="#ExtFlags_BIT15">Rectangular AoE</a></code>, <code><a href="#ExtFlags_BIT21">Random Path</a></code></li>
                      <li>(<code>0x200 – 0x2ff</code>): all Area Effect fields except <code><a href="#AreaFlags_BIT11">Cone Shaped</a></code></li>
                    </ul>
                  </li>
                  <li><code><a href="#0x8">Projectile Type</a></code> must be either <code>2|Single Target</code> or <code>3|Area Effect</code></li>
                  <li>Effect Radius: <code><a href="#0x2A">Projectile Width</a> + 2 pixels (1:horizontal, 3/4:vertical)</code></li>
                  <li>Duration: Projectile continues until reaching map edge.</li>
                  <li>Example: (Smashing Wave – IWDEE) &longrightarrow; <code>"SWAVE.PRO"</code></li>
                  <li>Option: <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> – Projectile terminates upon traveling originally targeted distance.</li>
                  <li>
                    Option: <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code> – Projectile rebounds off solid walls, terminating upon the 4<sup>th</sup> wall impact.
                    <ul>
                      <li>Example: (Lightning Bolt) &longrightarrow; <code>"LIGHTB.PRO"</code></li>
                    </ul>
                  </li>
                  <li>
                    Option: Spell Target(<code>Location</code>)
                    <ul>
                      <li>Option: <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code> – Projectile is stationary at targeted location.</li>
                      <li>Duration: Projectile remains active for <code>15</code> loops of its <code><a href="#0x104">Projectile Animation</a></code>.</li>
                      <li>
                        Option: <code><a href="#ExtFlags_BIT7">Pillar</a></code> – Projectile displays all cycles of travel animation simultaneously, stacked vertically.
                        <ul>
                          <li>Duration: Projectile remains active for <code>1</code> cycle of its <code><a href="#0x104">Projectile Animation</a></code>.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Option: Spell Target(<code>Creature</code>)
                    <ul>
                      <li>Option: <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code> – Projectile is stationary at targeted creature's location.</li>
                      <li>Effect Radius: None</li>
                      <li>Hits only the targeted creature, once.</li>
                      <li>Projectile continues to display for <code>15</code> loops of its <code><a href="#0x104">Projectile Animation</a></code>, but has no further effect.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 2: <a name="ExtFlags_BIT2">Draw centre VVC once</a></li>

              <li>
                Bit 3: <a name="ExtFlags_BIT3">Hit immediately</a>
                <ul>
                  <li><code><a href="#0x8">Projectile Type</a></code> must be either <code>2|Single Target</code> or <code>3|Area Effect</code>.</li>
                  <li>Travelling Projectile hits instantly, but is still displayed momentarily.</li>
                  <li>Area Effect Explosion will be slightly off center of the target('s/ed) location.</li>
                  <li>Compatibility: Suppressed by <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                  <li>Suppresses: <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                </ul>
              </li>

              <li>
                Bit 4: <a name="ExtFlags_BIT4">Face target</a>
                <ul>
                  <li>Dependency: Activated by <code><a href="#AreaFlags_BIT10">Draw Animation</a></code></li>
                  <li>
                    Allows the <code><a href="#0x21C">Explosion Animation</a></code> to be oriented in the direction of casting (the VVC and its BAM must be setup to do so as well).
                    <ul>
                      <li>This requires the <code><a href="#0x21C">Explosion Animation</a></code> to include a VVC (VEF optional), not just a BAM.</li>
                      <li>Any mirroring must be specified in the VVC.</li>
                      <li>The <a href="../ie_formats/vvc_v1.htm">VVC</a> file's <code>0x40|Travel Orientation</code> must use <code>BIT0|Face Target</code>.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 5: <a name="ExtFlags_BIT5">Curved path</a> (Unknown – still "not implemented" on EE games)
                <ul>
                  <li>Not required for the curved arc of <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code></li>
                </ul>
              </li>

              <li>Bit 6: <a name="ExtFlags_BIT6">Start random frame</a></li>
              <li>Bit 7: <a name="ExtFlags_BIT7">Pillar</a></li>
              <li>Bit 8: <a name="ExtFlags_BIT8">Semi-transparent trail puff VEF</a></li>
              <li>Bit 9: <a name="ExtFlags_BIT9">Tinted trail puff VEF</a></li>

              <li>Bit 10: <a name="ExtFlags_BIT10">Multiple projectiles</a>
                <ul>
                  <li>
                    When this flag is set, the game looks at the projectile entry one number less. If that projectile also has it set, it looks at the projectile entry one number less again, until it finds a projectile without that flag set. All projectiles it finds are fired at the target.
                    <ul>
                      <li>Compatibility: Any of these projectiles using <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> may not impact if the arc and/or distance to the target is too large.</li>
                    </ul>
                  </li>
                  <li>
                    The speed of the last projectile it finds determines the overall speed of the projectile, while the speed of the specified projectile determines the "arc" (strength) of all of the projectiles.
                    <ul>
                      <li>Arc value should be between <code>0</code> and <code>90</code> for three projectiles. More projectiles should use progressively lower arc values.</li>
                      <li>Some projectiles may never impact if the arc is too big.</li>
                      <li>Negative values result in no arc.</li>
                    </ul>
                  </li>
                  <li>Certain other flags in the projectile effectively disable the <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code> flag (such as being Area-Effect or a <code><a href="#ExtFlags_BIT14">lined-up AoE</a></code> (like Agannazar's Scorcher)), and those projectiles will be treated as if the flag wasn't set.</li>
                  <li>
                    Compatibility: This feature is lost when the projectile is used as an <code><a href="#0x21A">Explosion Projectile</a></code> or a <code><a href="#0x214">Secondary Projectile</a></code>.
                    <ul>
                      <li>The hardcoded projectiles for Magic Missile (<code>68-77|<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a></code>) / (<code>69-78|<a href="../../files/ids/bgee/missile.htm">MISSILE.IDS</a></code>) bypass this limitation.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 11: <a name="ExtFlags_BIT11">Default spell on missed</a></li>

              <li>
                Bit 12: <a name="ExtFlags_BIT12">Falling path</a>
                <ul>
                  <li>Traveling Projectile originates from target, instead of caster. (Near Instant hit)</li>
                  <li>Compatibility: Not viable with <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                  <li>Suppresses: <code>0x100 – 0x1FF|Traveling Projectile Animation</code></li>
                </ul>
              </li>

              <li>
                Bit 13: <a name="ExtFlags_BIT13">Comet</a>
                <ul>
                  <li>Affects: Traveling Projectile.</li>
                  <li>Projectile originates from upper-right or upper-left relative to target.</li>
                  <li>Vertical offset increased by <code><a href="#0xA">Projectile Speed</a></code>.</li>
                  <li>
                    Horizontal offset increased by <code><a href="#0x2A">Projectile Width</a></code>.
                    <ul>
                      <li>Can be positive or negative. Positive values are further right, negative values are further left.</li>
                    </ul>
                  </li>
                  <li><code><a href="#0xA">Projectile Speed</a></code> and <code><a href="#0x2A">Projectile Width</a></code> must be chosen carefully and fully tested – various combinations are prone to crashing.</li>
                  <li>
                    Compatibility:
                    <ul>
                      <li>Not usable with <code><a href="#AreaFlags_BIT11">Cone Shaped</a></code>. All other Area Flags work normally.</li>
                      <li>Not viable with <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                      <li>Not viable with <code><a href="#ExtFlags_BIT7">Pillar</a></code> – Projectile may terminate before reaching destination.</li>
                    </ul>
                  </li>
                  <li>Suppresses: <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                  <li>
                    Option: Spell Target(<code>Creature</code>)
                    <ul>
                      <li><code><a href="#0x8">Projectile Type</a></code> must be either <code>2|Single Target</code> or <code>3|Area Effect</code></li>
                    </ul>
                  </li>
                  <li>
                    Option: Spell Target(<code>Location</code>)
                    <ul>
                      <li><code><a href="#0x8">Projectile Type</a></code> must be <code>3|Area Effect</code></li>
                      <li>Example: (Comet – BG2EE) &longrightarrow; <code>"COMET.PRO"</code></li>
                    </ul>
                  </li>
                  <li>Compatibility: Spell Target(<code>Creature</code>) and Spell Target(<code>Location</code>) will calculate their flight paths differently based on (unknown) factors.</li>
                  <li>
                    Compatibility: <code><a href="#ExtFlags_BIT7">Pillar</a></code> – The Traveling Projectile will not use the vertical offset of the Comet trajectory, travelling directly horizontal.
                    <ul>
                      <li>Any Trailing animations of the Traveling Projectile will continue to use the Comet trajectory.</li>
                    </ul>
                  </li>
                  <li>Option: <code><a href="#ExtFlags_BIT12">Falling Path</a></code> – Projectile originates from opposite horizontal direction.</li>
                  <li><code><a href="#0x8">Projectile Type</a>: 3|Area Effect</code> – Area Effect processes as normal once Projectile reaches its target destination.</li>
                </ul>
              </li>

              <li>
                Bit 14: <a name="ExtFlags_BIT14">Lined up area of effect</a>
                <ul>
                  <li>A line of Traveling Projectiles extends between the caster and the target, lasting one round.</li>
                  <li>
                    <code><a href="#0x2A">Projectile Width</a></code> does NOT control the width of the line.
                    <ul>
                      <li>The line's effect is <code>52</code> pixels wide (when directly horizontal), or <code>40</code> pixels wide (when directly vertical).</li>
                    </ul>
                  </li>
                  <li>
                    The target is hit immediately, and again <code>4</code> seconds (<code>60</code> ticks) later.
                    <ul>
                      <li>Effects with <code>Saving Throw(BIT10|Ignore Primary Target)</code> will not affect the target (EE only).</li>
                    </ul>
                  </li>
                  <li>
                    Any creature in or entering the line between the caster and the target is hit immediately.
                    <ul>
                      <li>They are hit again if they are still in or reenter the line between the target and caster at least <code>3</code> seconds later before the projectile ends.</li>
                      <li>Effects with <code>Saving Throw(BIT11|Ignore Secondary Target)</code> will not affect these creatures (EE only).</li>
                    </ul>
                  </li>
                  <li>The Traveling Projectile will reposition itself to maintain a line between the caster and target as either of them moves around.</li>
                  <li>The caster is locked into facing the target for the duration, adjusting as either moves around.</li>
                  <li>
                    <code><a href="#0xA">Speed</a></code> controls the number of Traveling Projectiles that are displayed between the caster and target. It still must be non-zero to avoid crashing.
                    <ul>
                      <li>Value represents the distance (pixels) between each animation's center point.</li>
                    </ul>
                  </li>
                  <li>
                    Spell Target: <code>Creature/Object</code>
                    <ul>
                      <li>
                        Compatibility: <code><a href="#Behavior_BIT1">Use Height</a></code>
                        <ul>
                          <li>
                            This projectile will gradually lose its height value until it is at ground level (aesthetic/cosmetic only).
                            <ul>
                              <li>This decline is one pixel per instance of the animation displayed between the caster and target.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Spell Target: <code>Location</code>
                    <ul>
                      <li>
                        Compatibility: <code><a href="#Behavior_BIT1">Use Height</a></code>
                        <ul>
                          <li>This projectile will remain at the caster's height.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>If Main Projectile targets a location, this projectile will maintain its height value.</li>
                  <li><code><a href="#0x8">Projectile Type</a>: 2|Single Target</code></li>
                  <li>Priority: Suppressed by <code><a href="#ExtFlags_BIT7">Pillar</a></code> or <code><a href="#ExtFlags_BIT10">Multiple Projectile</a></code></li>
                  <li>Suppresses: <code><a href="#ExtFlags_BIT1">Pass Target</a></code>, <code><a href="#ExtFlags_BIT3">Hit Immediately</a></code>, <code><a href="#ExtFlags_BIT21">Random Path</a></code>, <code><a href="#0x11C">Palette</a></code>.</li>
                  <li>Compatibility: Such a projectile will NOT function as the <code><a href="#0x21A">Explosion Projectile</a></code> of another projectile.</li>
                  <li>
                    Compatibility: when used as the <code><a href="#0x214">Secondary Projectile</a></code> of another projectile:
                    <ul>
                      <li>
                        If that projectile does NOT use <code><a href="#ExtFlags_BIT0">Bounce from Walls</a></code>:
                        <ul>
                          <li>This projectile will ignore the target's animation height, traveling to their ground location instead of their casting height.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>Example: (Aganazzar's Scorcher) &longrightarrow; <code>"SCORCHER.PRO"</code></li>
                  <li>Option: <code><a href="#ExtFlags_BIT12">Falling Path</a></code> and/or <code><a href="#ExtFlags_BIT13">Comet</a></code> – Suppresses <code>0x100 – 0x1ff|Traveling Projectile Animation</code></li>
                  <li>
                    Option: <code><a href="#ExtFlags_BIT29">Limited Path Count</a></code> – Does not hit any target a second time. Projectile terminates after one second.
                    <ul>
                      <li>
                        Example: (Wand of Frost – BGEE only) – hardcoded projectile: (190|<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a>) / (191|<a href="../../files/ids/bgee/missile.htm">MISSILE.IDS</a>)
                        <ul>
                          <li>Exception: this projectile is further hardcoded for all its effects to only affect the initial target, not those in-between.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                Bit 15: <a name="ExtFlags_BIT15">Rectangular area of effect</a>
                <ul>
                  <li>
                    Affects target(s) in range every tick for its duration. Total number of target checks:
                    <ul>
                      <li>
                        <code>If <a href="#0x216"># Repetitions</a> < 2</code>:
                        <ul>
                          <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: <a href="#0x210">Explosion Frequency</a> + 1</code></li>
                          <li><code>Else: 1</code></li>
                        </ul>
                      </li>
                      <li>
                        <code>If <a href="#0x216"># Repetitions</a> > 1</code>:
                        <ul>
                          <li><code>If <a href="#AreaFlags_BIT14">Skip First Condition</a>: (<a href="#0x210">Explosion Frequency</a> + 1) * (<a href="#0x216"># Repetitions</a>)</code></li>
                          <li><code>Else: (<a href="#0x210">Explosion Frequency</a> + 1) * (<a href="#0x216"># Repetitions</a> - 1) + 1</code></li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>
                    Option: <code><a href="#AreaFlags_BIT3">Delayed Trigger</a></code> – Affects targets(s) in range <code><a href="#0x216"># Repetitions</a></code> times, checked every <code><a href="#0x210">Explosion Frequency</a></code> ticks.
                    <ul>
                      <li>This makes it trigger more similarly to regular repeating Area Effect projectiles.</li>
                    </ul>
                  </li>
                  <li>Area effect: <code><a href="#0x204">Trap Size</a> = Parallel Length</code>, <code><a href="#0x206">Explosion Size</a> = Perpendicular Length</code></li>
                  <li>Oriented in the direction of casting from the caster.</li>
                  <li><code><a href="#0x217">Explosion Effect</a></code> still plays as normal, but no longer represents affected area.</li>
                  <li>
                    <code><a href="#0x21C">Explosion Animation</a></code> must be used to represent the affected area.
                    <ul>
                      <li>The animation must be made to match the intended dimensions – it will not be stretched/tiled to fill the area.</li>
                      <li>
                        The following flags are recommended:
                        <ul>
                          <li>
                            <code><a href="#AreaFlags_BIT10">Draw Animation</a></code> – Required for <a href="#ExtFlags_BIT4">Face Target</a> to work.
                            <ul>
                              <li>Causes a new instance of <code><a href="#0x21C">Explosion Animation</a></code> to be played every frame, stacking to become a indiscernible blob.</li>
                            </ul>
                          </li>
                          <li>
                            <code><a href="#ExtFlags_BIT4">Face Target</a></code> – orients <a href="#0x21C">Explosion Animation</a> based on casting direction.
                            <ul>
                              <li><code>If <a href="#0x204">Trap Size</a> > <a href="#0x206">Explosion Size</a></code>, first animation cycle should be vertical.</li>
                              <li><code>If <a href="#0x204">Trap Size</a> < <a href="#0x206">Explosion Size</a></code>, first animation cycle should be horizontal.</li>
                            </ul>
                          </li>
                          <li>
                            <code><a href="#ExtFlags_BIT2">Draw center VVC once</a></code> – Single instance of <code><a href="#0x21C">Explosion Animation</a></code> is looped over the duration.
                            <ul>
                              <li>Removes the animation blob created by <code><a href="#ExtFlags_BIT10">Draw Animation</a></code>.</li>
                            </ul>
                          </li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                  <li>Priority: Suppressed by <code><a href="#ExtFlags_BIT1">Pass Target</a></code></li>
                  <li>
                    Suppresses:
                    <ul>
                      <li><code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                      <li><code><a href="#AreaFlags_BIT2">Triggered by Condition</a></code></li>
                      <li><code><a href="#0x202">Ray Count</a></code></li>
                    </ul>
                  </li>
                  <li>Example: (Wall of Moonlight – IWDEE) &longrightarrow; <code>"WOMOON.PRO"</code></li>
                </ul>
              </li>

              <li>Bit 16: <a name="ExtFlags_BIT16">Draw behind target</a></li>
              <li>Bit 17: <a name="ExtFlags_BIT17">Casting glow effect</a></li>
              <li>Bit 18: <a name="ExtFlags_BIT18">Travel door</a></li>
              <li>Bit 19: <a name="ExtFlags_BIT19">Stop/fade after hit</a></li>

              <li>
                Bit 20: <a name="ExtFlags_BIT20">Display message</a>
                <ul>
                  <li>Activates: <code><a href="#0x30">String</a></code></li>
                  <li>
                    <code>String</code> is displayed (by caster) twice: once when spell is selected for targeting, and again when spell is successfully cast.
                    <ul>
                      <li>Selecting a spell for a quick-spell slot also generates the message because this also selects the spell for targeting.</li>
                    </ul>
                  </li>
                  <li>Spells with <a href="../ie_formats/spl_v1.htm#splv1_Extended_Header">Ability Target</a> <code>5|Caster</code> do not trigger a targeting message, as they begin casting immediately when selected.</li>
                </ul>
              </li>

              <li>
                Bit 21: <a name="ExtFlags_BIT21">Random path</a>
                <ul>
                  <li>Traveling Projectile stutters towards the intended target, moving in random directions as it moves.</li>
                  <li>Priority: Suppressed by <code><a href="#ExtFlags_BIT1">Pass Target</a></code> and/or <code><a href="#ExtFlags_BIT14">Lined up AoE</a></code></li>
                  <li>
                    <code><a href="#0x8">Projectile Type</a>: 2|Single Target</code>
                    <ul>
                      <li>Compatibility: <code><a href="#ExtFlags_BIT7">Pillar</a></code> can cause the projectile to never impact its target</li>
                      <li>
                        Compatibility: <code><a href="#ExtFlags_BIT10">Multiple projectile</a></code> will both arc and stutter.
                        <ul>
                          <li>Arc strength and Speed must be carefully chosen to avoid projectiles flying out to nowhere.</li>
                        </ul>
                      </li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>Bit 22: <a name="ExtFlags_BIT22">Start random sequence</a></li>
              <li>Bit 23: <a name="ExtFlags_BIT23">Colour pulse on hit</a></li>
              <li>Bit 24: <a name="ExtFlags_BIT24">Touch projectile</a></li>
              <li>Bit 25: <a name="ExtFlags_BIT25">Negate first creature target</a></li>
              <li>Bit 26: <a name="ExtFlags_BIT26">Negate second creature target</a></li>
              <li>Bit 27: <a name="ExtFlags_BIT27">Use either IDS</a></li>
              <li>Bit 28: <a name="ExtFlags_BIT28">Delayed payload</a></li>
              <li>Bit 29: <a name="ExtFlags_BIT29">Limited path count</a></li>

              <li>Bit 30: <a name="ExtFlags_BIT30">IWD style check</a> (use entries from <a href="../../files/2da/2da_bgee/splprot.htm">SPLPROT.2DA</a> for first and second creature target). It works similar to op<a href="../../../opcodes/bgee.htm#op318">318</a>/<a href="../../../opcodes/bgee.htm#op326">326</a>, depending on the other related flags:
                <ul>
                  <li>Default: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT27">Use either IDS</a></code>:  Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> or matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a></code>: Exclude objects not matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT26">Neg. IDS2</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and not matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a> + <a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects not matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT26">Neg. IDS2</a> + <a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and not matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a> + <a href="#ExtFlags_BIT26">Neg. IDS2</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> or matching <code><a href="#0x42">Creature type 2</a></code></li>
                  <li><code><a href="#ExtFlags_BIT25">Neg. IDS1</a> + <a href="#ExtFlags_BIT26">Neg. IDS2</a> + <a href="#ExtFlags_BIT27">Use either IDS</a></code>: Exclude objects matching <code><a href="#0x3E">Creature type 1</a></code> and matching <code><a href="#0x42">Creature type 2</a></code></li>
                </ul>
              </li>

              <li>Bit 31: <a name="ExtFlags_BIT31">Caster affected</a> – This is related to effect target <code>9 (Original Caster)</code>.
                <ul>
                  <li>If this flag is set, the original caster is affected once for every target.</li>
                  <li>Without this flag, the original caster is affected only once, but only if there is at least one target.</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00030</td>
          <td>4 (strref)</td>
          <td><a name="0x30">Displayed Message</a></td>
        </tr>
        <tr>
          <td>0x00034</td>
          <td>4 (dword)</td>
          <td>Pulse colour (byte order: blue, green, red, unused) </td>
        </tr>
        <tr>
          <td>0x00038</td>
          <td>2 (word)</td>
          <td>Colour speed</td>
        </tr>
        <tr>
          <td>0x0003a</td>
          <td>2 (word)</td>
          <td>Screen shake amount</td>
        </tr>
        <tr>
          <td>0x0003c</td>
          <td>2 (word)</td>
          <td>First creature target: Value<br />
              <br />
              If Extended Flags bit 30 is
              <ul>
                <li>unset: use IDS targets</li>
                <li>set: use <a href="../../files/2da/2da_bgee/splprot.htm">SPLPROT.2DA</a></li>
              </ul>
          </td>
        </tr>
        <tr>
          <td>0x0003e</td>
          <td>2 (word)</td>
          <td><a name="0x3E">Creature Type 1</a><br />
              <br />
              If Extended Flags bit 30 is unset: use IDS targets
              <ul>
                <li>2 EA.IDS</li>
                <li>3 GENERAL.IDS</li>
                <li>4 RACE.IDS</li>
                <li>5 CLASS.IDS</li>
                <li>6 SPECIFIC.IDS</li>
                <li>7 GENDER.IDS</li>
                <li>8 ALIGNMEN.IDS</li>
                <li>9 KIT.IDS</li>
              </ul>
              If Extended Flags bit 30 is set: use entries from <a href="../../files/2da/2da_bgee/splprot.htm">SPLPROT.2DA</a>
          </td>
        </tr>
        <tr>
          <td>0x00040</td>
          <td>2 (word)</td>
          <td>Second creature target: Value</td>
        </tr>
        <tr>
          <td>0x00042</td>
          <td>2 (word)</td>
          <td><a name="0x42">Creature Type 2</a></td>
        </tr>
        <tr>
          <td>0x00044</td>
          <td>8 (resref)</td>
          <td>Default spell (<a href="spl_v1.htm">SPL</a>)</td>
        </tr>
        <tr>
          <td>0x0004c</td>
          <td>8 (resref)</td>
          <td>Success spell (<a href="spl_v1.htm">SPL</a>)</td>
        </tr>
        <tr>
          <td>0x00054</td>
          <td>2 (word)</td>
          <td>Angle increase minimum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00056</td>
          <td>2 (word)</td>
          <td>Angle increase maximum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00058</td>
          <td>2 (word)</td>
          <td>Curve minimum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x0005a</td>
          <td>2 (word)</td>
          <td>Curve maximum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x0005c</td>
          <td>2 (word)</td>
          <td>THAC0 bonus [PSTEE]</td>
        </tr>
        <tr>
          <td>0x0005e</td>
          <td>2 (word)</td>
          <td>THAC0 bonus (non-actor) [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00060</td>
          <td>2 (word)</td>
          <td>Radius minimum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00062</td>
          <td>2 (word)</td>
          <td>Radius maximum [PSTEE]</td>
        </tr>
        <tr>
          <td>0x00064</td>
          <td>156 (bytes)</td>
          <td>Unused</td>
        </tr>
      </tbody>
    </table>
    <br />

    The following struct is added when the projectile is a single target or area effect projectile (see 'Projectile type' at offset 0x00008). It has 100h (256) bytes.<br />
    <br />
    <table border="1" width="98%">
      <colgroup>
        <col width="5%" />
        <col width="12%" />
         <col width="*" />
      </colgroup>
      <thead>
        <tr>
          <th>Offset</th>
          <th>Size (datatype)</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>0x00100</td>
          <td>4 (dword)</td>
          <td>BAM projectile flags
            <ul>
              <li>
                bit 0: Enable BAM colouring (palette at 0x11c)
                <ul>
                  <li>Activates "Projectile Color" fields (0x11c – 0x12a)</li>
                </ul>
              </li>

              <li>
                bit 1: Enable smoke
                <ul>
                  <li>Activates "Smoke Puff Delay" field (0x12b)</li>
                </ul>
              </li>

              <li>
                bit 2: Colored smoke
                <ul>
                  <li>
                    Activates "Smoke Puff Color" field (0x12c – 0x132)
                    <ul>
                      <li>The (0x134|Smoke Animation) must support (<code>false_color=1</code>) recoloring for these fields to do anything.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                bit 3: Enable area lighting usage / Not light source
                <ul>
                  <li>Darkens (0x104|Projectile Animation)</li>
                </ul>
              </li>

              <li>bit 4: Enable area height usage</li>

              <li>
                bit 5: Enable shadow
                <ul>
                  <li>Activates "Shadow Animation" field (0x10c)</li>
                </ul>
              </li>

              <li>
                bit 6: Enable light spot
                <ul>
                  <li>Activates "Light Spot" fields (0x116 – 0x11b)</li>
                  <li>
                    Compatibility: This lighting does not use the vertical offset of the Traveling projectile when using Extended Flag(BIT13|Comet).
                    <ul>
                      <li>It travels directly horizontal at the target's vertical location.</li>
                    </ul>
                  </li>
                </ul>
              </li>

              <li>
                bit 7: Enable brighten flags
                <ul>
                  <li>Alters the appearance of the (0x104|Projectile Animation) and (0x10c|Shadow Animation).</li>
                </ul>
              </li>

              <li>
                bit 8: Low level brighten
                <ul>
                  <li>Alters the appearance of the (0x104|Projectile Animation) and (0x10c|Shadow Animation).</li>
                </ul>
              </li>

              <li>
                bit 9: High level brighten
                <ul>
                  <li>Alters the appearance of the (0x104|Projectile Animation) and (0x10c|Shadow Animation).</li>
                </ul>
              </li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00104</td>
          <td>8 (resref)</td>
          <td>Projectile animation (<a href="bam_v1.htm">BAM</a>)</td>
        </tr>
        <tr>
          <td>0x0010c</td>
          <td>8 (resref)</td>
          <td>Shadow animation (<a href="bam_v1.htm">BAM</a>)</td>
        </tr>
        <tr>
          <td>0x00114</td>
          <td>1 (byte)</td>
          <td>Projectile number (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00115</td>
          <td>1 (byte)</td>
          <td>Shadow number (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00116</td>
          <td>2 (word)</td>
          <td>Light spot intensity</td>
        </tr>
        <tr>
          <td>0x00118</td>
          <td>2 (word)</td>
          <td>Light spot width</td>
        </tr>
        <tr>
          <td>0x0011a</td>
          <td>2 (word)</td>
          <td>Light spot height</td>
        </tr>
        <tr>
          <td>0x0011c</td>
          <td>8 (resref)</td>
          <td>Palette (<a href="bmp.htm">BMP</a>)
            <ul>
              <li>STTRAVL1 = Blue</li>
              <li>STTRAVL2 = Yellow</li>
              <li>STTRAVL3 = Green</li>
              <li>STTRAVL4 = Purple</li>
              <li>STTRAVL5 = Pale purple</li>
              <li>STTRAVL6 = Pink</li>
              <li>STTRAVL7 = Blue</li>
              <li>STTRAVL8 = Gold</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00124</td>
          <td>7 (bytes)</td>
          <td>Projectile colours</td>
        </tr>
        <tr>
          <td>0x0012b</td>
          <td>1 (byte)</td>
          <td>Smoke puff period</td>
        </tr>
        <tr>
          <td>0x0012c</td>
          <td>7 (bytes)</td>
          <td>Smoke colours</td>
        </tr>
        <tr>
          <td>0x00133</td>
          <td>1 (byte)</td>
          <td> <div class="unknown">Face target granularity<br />
            <ul>
              <li>1  : Do not face target</li>
              <li>5  : Mirrored eastern directions (reduced granularity)</li>
              <li>9  : Mirrored eastern (full granularity)</li>
              <li>16 : Mot mirrored, not reduced</li>
            </ul>
          </div>
          </td>
        </tr>
        <tr>
          <td>0x00134</td>
          <td>2 (short)</td>
          <td>Projectile smoke animation (<a href="../../files/ids/bgee/animate.htm">ANIMATE.IDS</a>)</td>
        </tr>
        <tr>
          <td>0x00136</td>
          <td>8 (resref)</td>
          <td>Trailing animation 1 (BAM)</td>
        </tr>
        <tr>
          <td>0x0013e</td>
          <td>8 (resref)</td>
          <td>Trailing animation 2 (BAM)</td>
        </tr>
        <tr>
          <td>0x00146</td>
          <td>8 (resref)</td>
          <td>Trailing animation 3 (BAM)</td>
        </tr>
        <tr>
          <td>0x0014e</td>
          <td>2 (word)</td>
          <td>Trailing number 1 (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00150</td>
          <td>2 (word)</td>
          <td>Trailing number 2 (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00152</td>
          <td>2 (word)</td>
          <td>Trailing number 3 (BAM sequence)</td>
        </tr>
        <tr>
          <td>0x00154</td>
          <td>4 (dword)</td>
          <td>Flags
            <ul>
              <li>bit 0: Puff at target</li>
              <li>bit 1: Puff at source</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td>0x00158</td>
          <td>168 (bytes)</td>
          <td>Unused</td>
        </tr>
      </tbody>
    </table>
    <br />

    If the projectile is an area effect projectile then an additional struct is added to the file. It has 100h (256) bytes.<br />
    <br />
    <table border="1" width="98%">
      <colgroup>
        <col width="5%" />
        <col width="12%" />
         <col width="*" />
      </colgroup>
      <thead>
        <tr>
          <th>Offset</th>
          <th>Size (datatype)</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
      <tr>
        <td>0x00200</td>
        <td>4 (dword)</td>
        <td>Area projectile flags
          <ul>
            <li>bit 0: Projectile remains visible at destination</li>

            <li>
              bit 1: Triggered by inanimate objects
              <ul>
                <li><a href="../ie_formats/are_v1.htm#formAREAV1_0_Container">Containers</a> and <a href="../ie_formats/are_v1.htm#formAREAV1_0_Info">Area Triggers</a> (Proximity/Info/Travel) within range are (also) valid targets.</li>
              </ul>
            </li>

            <li>
              bit 2: Triggered on condition
              <ul>
                <li>
                  Projectile is a "Trap":
                  <ul>
                    <li>It will only explode if a valid target is within its (0x204|Trap Size) and its (0x206|Explosion Size).</li>
                    <li>It will explode a number of times equal to (0x216|# Repetitions).</li>
                    <li>It will check for target's instantly and every (0x210|Explosion Frequency) ticks.</li>
                    <li>
                      Option: Area Flag(BIT3|Delayed Trigger)
                      <ul>
                        <li>Subsequent checks will only explode after two sequential checks are passed.</li>
                      </ul>
                    </li>
                    <li>
                      Option: Area Flag(BIT11|Cone Shaped) – Does not create a traditional "Trap"
                      <ul>
                        <li>It will only explode if a valid target is within its (0x206|Explosion Size) and (0x224|Cone Width)</li>
                        <li>It will check for targets within its (0x206|Explosion Size) every (0x210|Explosion Frequency) ticks.</li>
                        <li>Projectile terminates after a number of checks equal to its (0x216|# Repetitions), whether it explodes or not.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>Compatibility: Suppressed by Extended Flag(BIT15|Rectangular AoE)</li>
              </ul>
            </li>

            <li>
              bit 3: Trigger during delay / Delayed trigger
              <ul>
                <li>
                  Compatibility: Area Flag(BIT14|Skip First Condition)
                  <ul>
                    <li>First explosion is instead delayed by (0x210|Explosion Frequency) ticks.</li>
                  </ul>
                </li>
                <li>
                  Compatibility: Area Flag(BIT2|Triggered by Condition)
                  <ul>
                    <li>Target checks after the first will only explode after two sequential checks are passed.</li>
                  </ul>
                </li>
                <li>
                  Compatibility: Extended Flag(BIT15|Rectangular AoE)
                  <ul>
                    <li>Forces this option to affect targets(s) in range (0x216|# Repetitions) times, checked every (0x210|Explosion Frequency) ticks.</li>
                    <li>Normally it would affect target(s) in range every tick for its duration.</li>
                    <li>This makes it trigger more similarly to other repeating Area Effect projectiles.</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>bit 4: Use secondary projectile
              <ul>
                <li>
                  Dependency: Spell Target(Creature)
                  <ul>
                    <li>Activates the (0x214|Secondary Projectile) field.</li>
                    <li>Upon exploding, the (0x214|Secondary Projectile) is fired every tick at the targeted creature for the duration of the projectile.</li>
                    <li>
                      The (0x214|Secondary Projectile) normally does NOT deliver any effects.
                      <ul>
                        <li>It is strictly aesthetic, it carries no effects from the spell/item. A variety of projectiles use these to generate their explosion animation (via another projectile), instead of using a VVC. For instance, all of the "Sparkle Area (color) (party/not)" projectiles do this.</li>
                      </ul>
                    </li>
                    <li>Duration is controlled by (0x216|# Repetitions), (0x210|Explosion Frequency), and Area Flag(BIT14|Skip First Condition).</li>
                    <li>
                      Total number of (0x214|Secondary Projectile)s fired:
                      <ul>
                        <li>
                          <code>If (0x216|# Repetitions) < 2</code>:
                          <ul>
                            <li><code>If Area Flag(BIT14|Skip First Condition):	(0x210|Explosion Frequency) + 1</code></li>
                            <li><code>Else: 1</code></li>
                          </ul>
                        </li>
                        <li>
                          <code>If (0x216|# Repetitions) > 1</code>:
                          <ul>
                            <li><code>If Area Flag(BIT14|Skip First Condition): ((0x210|Explosion Frequency) + 1) * (0x216|# Repetitions)</code></li>
                            <li><code>Else: ((0x210|Explosion Frequency) + 1) * ((0x216|# Repetitions) - 1) + 1</code></li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>
                      Option: Extended Flag(BIT0|Bounce from walls)
                      <ul>
                        <li>Alters the (0x214|Secondary Projectile) to deliver effects.</li>
                        <li>Alters the (0x214|Secondary Projectile) to originate from the targeted creature, rather than the caster.</li>
                        <li>The (0x214|Secondary Projectile) will be oriented in a random direction.</li>
                        <li>Compatibility: With Area Flag(BIT11|Cone Shaped), the (0x214|Secondary Projectile) will instead target the caster's location (but not the caster directly).</li>
                        <li>
                          The Traveling Projectile of the (0x214|Secondary Projectile) will terminate after a number of ticks equal to (0x210|Explosion Frequency).
                          <ul>
                            <li>In order to hit anything, it must itself be an Area-Effect projectile (or Pass-Target projectile). As already stated, this mode only functions when the target of the spell/item is a creature (not a point), and it will only fire on that creature, not all targets in range.</li>
                            <li>Compatibility: Projectiles using Extended Flag(BIT29|Limited Path Count) travel for their normal distance/duration.</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                    <li>Either way, the Secondary Projectile is only practical for single-trigger projectiles (the Sparkle Areas or a Fireball, but not something like Web or Entangle), as the projectile is fired every tick of the projectile's duration. (Unless you want to flood the screen with visuals).</li>
                    <li>The Secondary Projectile does not fire until the projectile explodes.</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>bit 5: Use fragment graphics</li>

            <li>
              bit 6: Affect only enemies
              <ul>
                <li>Activates Area Flag(BIT7|Affect only allies)</li>
              </ul>
            </li>

            <li>
              bit 7: Affect only allies
              <ul>
                <li>Flag Off: Projectile will only target enemies of the caster.</li>
                <li>Flag On: Projectile will only target allies of the caster.</li>
              </ul>
            </li>

            <li>
              bit 8: Number of triggers equal to cast mage level
              <ul>
                <li>(0x216|# Repetitions) is replaced with the caster's Wizard Casting Level.</li>
                <li>This ignores <a href="../../opcodes/bgee.htm#op191">opcode #191</a>.</li>
                <li>(Possibly ignores Wild Mages random casting level modifier as well)</li>
              </ul>
            </li>

            <li>
              bit 9: Number of triggers equal to cast cleric level
              <ul>
                <li>(0x216|# Repetitions) is replaced with the caster's Priest Casting Level.</li>
                <li>This ignores <a href="../../opcodes/bgee.htm#op191">opcode #191</a>.</li>
              </ul>
            </li>

            <li>bit 10: Use VVC</li>

            <li>bit 11: Cone shape
              <ul>
                <li>It requires all targets to be in the caster's line of sight.</li>
                <li>Cone-shaped projectiles automatically exclude the caster.</li>
                <li>Compatibility: Not usable with Extended Flag(BIT13|Comet).</li>
                <li>
                  Area: Restricted to arc oriented in direction of casting.
                  <ul>
                    <li>Area radius remains = (0x206|Explosion Size) pixels.</li>
                    <li><code>Arc Size = direction of casting +/- (0x224|Cone Width) / 2 degrees</code></li>
                  </ul>
                </li>
                <li>
                  Projectile explodes instantly, at caster's location. The following originate from the caster's location:
                  <ul>
                    <li>Area Flag(BIT0|Trap Visible), (0x21a|Explosion Projectile), (0x217|Explosion Effect), (0x21c|Explosion Animation)</li>
                    <li>
                      The instant explosion effectively suppresses the (0x100 – 0x1ff|Traveling Projectile Animation), and all flags/fields that affect it.
                      <ul>
                        <li>Except as used by Area Flag(BIT0|Trap Visible).</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  Compatibility:
                  <ul>
                    <li>Extended Flag(BIT15|Rectangular AoE) will override the changes to the affected area, but not changes to the visual explosion.</li>
                  </ul>
                </li>
                <li>Suppresses: Extended Flag(BIT1|Pass Target)</li>
                <li>
                  Option: Area Flag(BIT2|Triggered By Condition) – Explosion only occurs if valid targets are within range when cast.
                  <ul>
                    <li>Does not create a traditional "Trap".</li>
                    <li>Area Flag(BIT0|Trap Visible) still plays as normal.</li>
                  </ul>
                </li>
                <li>
                  Option: Extended Flag(BIT3|Hit Immediately) – Explosion occurs at targeted location, instead of caster's location.
                  <ul>
                    <li>Caster is not affected by the explosion, even if they are in the affected area.</li>
                    <li>Option: Spell Target(Creature) – Cone arc is oriented in the opposite direction of the targeted creature's current facing.</li>
                    <li>Option: Spell Target(Location) – Cone arc is oriented to the Right/East.</li>
                  </ul>
                </li>
                <li>
                  Option: Extended Flag(BIT12|Falling Path) – Explosion occurs at targeted location, instead of caster's location.
                  <ul>
                    <li>Caster is not affected by the explosion, even if they are in the affected area.</li>
                    <li>Cone arc is oriented to the Right/East.</li>
                    <li>Suppressed: Area Flag(BIT0|Trap Visible)</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              bit 12: Affect objects through wall, mountain, building, and off-area
              <ul>
                <li>Without this flag, (0x21c|Explosion Size) is blocked by walls.</li>
                <li>With this flag, (0x21c|Explosion Size) is not blocked by walls.</li>
              </ul>
            </li>

            <li>bit 13: Check triggers from animation frame 30 (req. bit 0)</li>

            <li>
              bit 14: Delayed explosion / Skip first condition
              <ul>
                <li>First explosion does not trigger any (0x21a|Explosion Projectile) (no one is affected), and does not count towards (0x216|# Repetitions).</li>
                <li>Option: Area Flag(BIT3|Delayed Trigger) – First explosion is instead delayed (0x210|Explosion Frequency) ticks, and otherwise works as normal.</li>
              </ul>
            </li>

            <li>
              bit 15: Affect only one target
              <ul>
                <li>Activates fields (0x244|# Targeting Dice) and (0x246|Targeting Dice Size).</li>
                <li>Activates Area Extended Flag[(BIT10|Use HD Lookup) and (BIT15|Hit Point Limit)].</li>
                <li>This field limits the number of valid targets for each explosion to <code>XdY</code>, where X = (0x244|# Targeting Dice), and Y = (0x246|Targeting Dice Size).</li>
                <li>
                  Option: Area Extended Flag(BIT10|Use HD Lookup)
                  <ul>
                    <li>
                      Each explosion will only affect targets whose HD/level is equal to or less than <code>XdY</code>, where X = (0x244|# Targeting Dice), and Y = (0x246|Targeting Dice Size).
                      <ul>
                        <li>(BUG, at least on EE games) Regardless of Dice values, it cannot affect creature's whose HD/Level is 9 or greater.</li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  Option: Area Extended Flag(BIT15|Hit Point Limit)
                  <ul>
                    <li>Each explosion will only affect targets whose current Hit Points are equal or less than (0x246|Targeting Dice Size).</li>
                    <li>Each explosion will only affect a total number of targets whose current Hit Point total is equal or less than (0x244|# Targeting Dice).</li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
          Further bits are unused
        </td>
      </tr>
      <tr>
        <td>0x00202</td>
        <td>2 (word)</td>
        <td>Ray count (EE only...?)
          <ul>
            <li>Suppresses the "Secondary Projectile" flag (BIT4 @ 0x200).</li>
            <li>It causes the Explosion Projectile to be fired (Ray count) amount of times, starting at 135 degrees (South-East), and increasing by (Cone Width) degrees each time. For instance, 4 Rays at 90 Cone Width fires the Explosion Projectile SE, SW, NW, and NE.</li>
            <li>The Explosion Projectile must be either Area-Effect or Pass-Target (BIT1 @ 0x2c) to affect anything.</li>
          </ul>
        </td>
      </tr>
      <tr>
        <td>0x00204</td>
        <td>2 (word)</td>
        <td>Trigger radius/Trap Size (divide by approx 8.5 to receive diameter in feet)<br><br>
          It is generally set equal to Explosion Size, unless you're using the "Rectangular AoE" flag (Wall spells) or the "Triggered by Condition" flag (actual Traps).
        </td>
      </tr>
      <tr>
        <td>0x00206</td>
        <td>2 (word)</td>
        <td>Area of effect/Explosion Size (divide by approx 8.5 to receive diameter in feet)<br><br>
          It defines the radius of the projectile, 16 units = 1 foot. Default visual range = 448. 
        </td>
      </tr>
      <tr>
        <td>0x00208</td>
        <td>8 (resref)</td>
        <td>Trigger sound</td>
      </tr>
      <tr>
        <td>0x00210</td>
        <td>2 (word)</td>
        <td>Explosion delay (Frequency)<br><br>
          It is a measure of the number of ticks between target checks, where 100 = 1 round.<br>
          Subsequently, it also determines how long an Area-Effect projectile lasts, as the total duration is generally <code>Frequency * #Repetitions (@ 0x216)</code>.
        </td>
      </tr>
      <tr>
        <td>0x00212</td>
        <td>2 (short)</td>
        <td>Fragment animation (<a href="../../files/ids/bgee/animate.htm">ANIMATE.IDS</a>)</td>
      </tr>
      <tr>
        <td>0x00214</td>
        <td>2 (word)</td>
        <td>Secondary projectile (<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a>-1)</td>
      </tr>
      <tr>
        <td>0x00216</td>
        <td>1 (byte)</td>
        <td>Trigger count (used if bits 8 and 9 at 0x200 are not set)</td>
      </tr>
      <tr>
        <td>0x00217</td>
        <td>1 (byte)</td>
        <td>Explosion animation (<a href="../../files/ids/bgee/fireball.htm">FIREBALL.IDS</a>)</td>
      </tr>
      <tr>
        <td>0x000218</td>
        <td>1 (byte)</td>
        <td>Explosion colour</td>
      </tr>
      <tr>
        <td>0x000219</td>
        <td>1 (byte)</td>
        <td>Unused</td>
      </tr>
      <tr>
        <td>0x00021a</td>
        <td>2 (bytes)</td>
        <td>Explosion projectile (<a href="../../files/ids/bgee/projectl.htm">PROJECTL.IDS</a>), played on affected creatures</td>
      </tr>
      <tr>
        <td>0x00021c</td>
        <td>8 (resref)</td>
        <td>Explosion animation (<a href="vvc_v1.htm">VVC</a>)</td>
      </tr>
      <tr>
        <td>0x000224</td>
        <td>2 (word)</td>
        <td>Cone width (1 to 359)</td>
      </tr>
      <tr>
        <td colspan="3"><b>The following fields are used by Enhanced Editions games only:</b></td>
      </tr>
      <tr>
        <td>0x00226</td>
        <td>2 (word)</td>
        <td><span class="unknown"> Unused </span></td>
      </tr>
      <tr>
        <td>0x00228</td>
        <td>8 (resref)</td>
        <td>Spread animation (<a href="vef_v1.htm">VEF</a>/<a href="vvc_v1.htm">VVC</a>/<a href="bam_v1.htm">BAM</a>)</td>
      </tr>
      <tr>
        <td>0x00230</td>
        <td>8 (resref)</td>
        <td>Ring animation (<a href="vef_v1.htm">VEF</a>/<a href="vvc_v1.htm">VVC</a>/<a href="bam_v1.htm">BAM</a>)</td>
      </tr>
      <tr>
        <td>0x00238</td>
        <td>8 (resref)</td>
        <td>Area sound (<a href="wavc_v1.htm">WAV</a>)</td>
      </tr>
      <tr>
        <td>0x00240</td>
        <td>4 (dword)</td>
        <td>Extended flags
          <ul>
            <li>
              Bit 0: Paletted ring
              <ul>
                <li>(Defunct) Should cause (0x230|Ring Animation) to be recolored by the (0x218|Explosion Color) field, but instead just recolors it all black.</li>
              </ul>
            </li>

            <li>
              Bit 1: Random speed
              <ul>
                <li>
                  Affects expansion rate of (0x230|Ring Animation) and (0x228|Spread Animation), but not certain of how.
                  <ul>
                    <li>Might require (BIT2|Start Scattered) and/or (BIT4|Repeat Scattering).</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>
              Bit 2: Start scattered
              <ul>
                <li>Causes each of the (0x21c|Explosion Animation)s to play at random intervals instead of looping continuously throughout the duration.</li>
              </ul>
            </li>

            <li>
              Bit 3: Paletted centre
              <ul>
                <li>Cause the (0x21c|Explosion Animation) to be recolored by the (0x218|Explosion Color) field.</li>
              </ul>
            </li>

            <li>Bit 4: Repeat scattering</li>

            <li>
              Bit 5: Paletted animation
              <ul>
                <li>(Defunct) Should cause (0x228|Spread Animation) to be recolored by the (0x218|Explosion Color) field, but instead just recolors it all black.</li>
              </ul>
            </li>

            <li>Bit 6: <span class="unknown"> Unused </span></li>
            <li>Bit 7: <span class="unknown"> Unused </span></li>
            <li>Bit 8: <span class="unknown"> Unused </span></li>

            <li>
              Bit 9: Oriented fireball puffs
              <ul>
                <li>Will orient the (0x230|Ring Animation) in the direction it's travelling.</li>
                <li>It can only mirror horizontally, not vertically. The animation will need at least these 9 directions to be properly oriented: S, SSW, SW, WSW, W, WNW, NW, NNW, N</li>
              </ul>
            </li>

            <li>Bit 10: Use hit dice lookup<br><br>
              <ul>
                <li>
                  Each explosion will only affect targets whose HD/level is equal to or less than <code>XdY</code>, where <code>X = (0x244|# Targeting Dice)</code>, and <code>Y = (0x246|Targeting Dice Size)</code>.
                  <ul>
                    <li>(BUG, at least on EE games) Regardless of Dice values, it cannot affect creatures whose HD/Level is 9 or greater (hardcoded for the 6th–level spell 'Death Spell').</li>
                  </ul>
                </li>
              </ul>
            </li>

            <li>Bit 11: <span class="unknown"> Unused </span></li>
            <li>Bit 12: <span class="unknown"> Unused </span></li>

            <li>
              Bit 13: Blended area/ring animation
              <ul>
                <li>Will add transparency to the (0x21c|Explosion Animation), (0x228|Spread Animation), and (0x230|Ring Animation).</li>
              </ul>
            </li>

            <li>
              Bit 14: Glowing area/ring animation
              <ul>
                <li>Will brighten the (0x21c|Explosion Animation), (0x228|Spread Animation), and (0x230|Ring Animation). (Generally make it "glow")</li>
              </ul>
            </li>

            <li>Bit 15: Hit point limit – Used in combination with Area Flag(BIT15|Single Target) and Extended Area Flag(BIT10|Use HD Lookup):
              <ul>
                <li>Each explosion will only affect targets whose current Hit Points are equal or less than (0x246|Targeting Dice Size).</li>
                <li>Each explosion will only affect a total number of targets whose current Hit Point total is equal or less than (0x244|# Targeting Dice).</li>
              </ul>
            </li>
          </ul>
        </td>
      </tr>
      <tr>
        <td>0x00244</td>
        <td>2 (word)</td>
        <td>Dice thrown for multiple targets</td>
      </tr>
      <tr>
        <td>0x00246</td>
        <td>2 (word)</td>
        <td>Dice sides for multiple targets</td>
      </tr>
      <tr>
        <td>0x00248</td>
        <td>2 (word)</td>
        <td>Animation granularity</td>
      </tr>
      <tr>
        <td>0x0024a</td>
        <td>2 (word)</td>
        <td>Animation granularity divider</td>
      </tr>
      <tr>
        <td>0x0024c</td>
        <td>180 (bytes)</td>
        <td>Unused</td>
      </tr>
    </tbody>
    </table>
    </div>
  </div>
</div>

