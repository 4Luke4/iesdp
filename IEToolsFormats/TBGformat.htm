<html>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1250">
<meta name="GENERATOR" content="Microsoft FrontPage 4.0">
<meta name="ProgId" content="FrontPage.Editor.Document">
<title>TBGfileformat</title>
<meta name="Microsoft Theme" content="none, default">
</head>

<body>

<h1 align="center">TBG files format</h1>
<table border="1" width="610">
  <tr>
    <td width="28%">FileExtension :</td>
    <td width="72%">TBG</td>
  </tr>
  <tr>
    <td width="28%">Content :</td>
    <td width="72%">Description of TBG (TeamBG Exported File)</td>
  </tr>
  <tr>
    <td width="28%">History :</td>
    <td width="72%">File done by Todd (ToddTeamBG) , Ken (KenTeamBG) and Corak</td>
  </tr>
</table>
<h2>Description</h2>
<p>TBG formatted files allow a file for Infinity Engine games to be transferred
between computers while keeping all Text References intact.</p>
<h2><a name="formTBG_NamingConventions">TBG Naming Conventions</a></h2>
<p>&nbsp;
<ul>
  <li>*.TBG - Item TBG Files
  <li>*-A.TBG - Area TBG Files
  <li>*-B.TBG - Script TBG Files
  <li>*-C.TBG - Creature TBG Files
  <li>*-D.TBG - Dialog TBG Files
  <li>*-H.TBG - CHUI TBG Files
  <li>*-N.TBG - NPC TBG Files
  <li>*-P.TBG - SRC TBG Files
  <li>*-S.TBG - Spell TBG Files
  <li>*-T.TBG - Store TBG Files</li>
</ul>
<p>&nbsp;</p>
<h2><a name="formTBG_NamingConventionsFuture">TBG Naming Conventions Future
Possible Additions</a></h2>
<p>&nbsp;
<ul>
  <li>*-K.TBG - Chitin.Key TBG Files
  <li>*-R.TBG - 2DA TBG Files
  <li>*-W.TBG - World Map TBG Files</li>
</ul>
<p>&nbsp;</p>
<h2><a name="formTBG_Versions">TBG file versions</a></h2>
<ul>
  <li><a href="#formTBGV1_0">V1.0 - Original format devised and used by oldest
    programs and made for item (ITM) files only.</a>
  <li><a href="#formTBGV2_0">V2.0 - First format revision made to work better
    for two file types: item (ITM) and spells (SPL).</a>
  <li><a href="#formTBGV3_0">V3.0 - Format revision to try to be usable for
    almost any possible file type with StrRefs. Specifically targeted for item (ITM),
    spell (SPL), and creature (CRE).</a>
  <li><a href="#formTBGV4_0">V4.0 - Next revision after some limitations of last
    version were discovered. Specifically targeted for item (ITM), spell (SPL),
    creature (CRE), dialog (DLG), and area (ARE) files.</a>
  <li><a href="#formTBGNV1_0">N V1.0 - Revision specifically made to house NPC
    information for updating GAM files allowing new NPCs to be added.</a></li>
</ul>
<br>
<br>
<br>
<h2 class="frmhead"><a name="formTBGV1_0">TBG V1.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formTBGV1_0_Header">Header</a>
  <li><a href="#formTBGV1_0_File">File</a>
  <li><a href="#formTBGV1_0_TextEntries">Text Entries</a></li>
</ul>
<h4 class="reshead"><a name="formTBGV1_0_Header">TBG V1.0 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (dword)</td>
      <td>File Offset</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>File Length</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Unidentified Name Offset</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Unidentified Name Length</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td>Identified Name Offset</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4 (dword)</td>
      <td>Identified Name Length</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>4 (dword)</td>
      <td>Unidentified Description Offset</td>
    </tr>
    <tr>
      <td>0x001c</td>
      <td>4 (dword)</td>
      <td>Unidentified Description Length</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (dword)</td>
      <td>Identified Description Offset</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (dword)</td>
      <td>Identified Description Length</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGV1_0_File">TBG V1.0 File</a></h4>
<p>This is simply the entire file itself that is to be transferred via this file
format.</p>
<h4 class="reshead"><a name="formTBGV1_0_TextEntries">TBG V1.0 Text Entries</a></h4>
<p>This is all the actual text that will be actually imported into the Infinity
Engine game.</p>
<br>
<br>
<br>
<h2 class="frmhead"><a name="formTBGV2_0">TBG V2.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formTBGV2_0_Header">Header</a>
  <li><a href="#formTBGV2_0_File">File</a>
  <li><a href="#formTBGV2_0_TextEntries">Text Entries</a></li>
</ul>
<h4 class="reshead"><a name="formTBGV2_0_Header">TBG V2.0 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (dword)</td>
      <td>File Offset</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>File Length</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Unidentified Name Offset</td>
    </tr>
    <tr>
      <td>0x000c</td>
      <td>4 (dword)</td>
      <td>Unidentified Name Length</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td>Identified Name Offset</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4 (dword)</td>
      <td>Identified Name Length</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>4 (dword)</td>
      <td>Unidentified Description Offset</td>
    </tr>
    <tr>
      <td>0x001c</td>
      <td>4 (dword)</td>
      <td>Unidentified Description Length</td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (dword)</td>
      <td>Identified Description Offset</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (dword)</td>
      <td>Identified Description Length</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>12 (char array)</td>
      <td>Filename with Extension of file</td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>1 (byte)</td>
      <td>Infinity Engine Game TBG is for:
        <ul>
          <li>value 0x01- Baldur's Gate
          <li>value 0x02- Planescape: Torment
          <li>value 0x03- Icewind Dale
          <li>value 0x04- Baldur's Gate II: Shadows of Amn</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0035</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGV2_0_File">TBG V2.0 File</a></h4>
<p>This is simply the entire file itself that is to be transferred via this file
format.</p>
<h4 class="reshead"><a name="formTBGV2_0_TextEntries">TBG V2.0 Text Entries</a></h4>
<p>This is all the actual text that will be actually imported into the Infinity
Engine game.</p>
<br>
<br>
<br>
<h2 class="frmhead"><a name="formTBGV3_0">TBG V3.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formTBGV3_0_Header">Header</a>
  <li><a href="#formTBGV3_0_TextHeader">Text Headers</a>
  <li><a href="#formTBGV3_0_File">File</a>
  <li><a href="#formTBGV3_0_TextEntries">Text Entries</a></li>
</ul>
<h4 class="reshead"><a name="formTBGV3_0_Header">TBG V3.0 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (char array)</td>
      <td>TBG Identifier (&quot;TBG3&quot;)</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Null fields</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>12 (char array)</td>
      <td>Filename with Extension of file</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4 (dword)</td>
      <td>File Offset</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>4 (dword)</td>
      <td>File Length</td>
    </tr>
    <tr>
      <td>0x001C</td>
      <td>4 (dword)</td>
      <td>Infinity Engine Game TBG is for:
        <ul>
          <li>value 0x01- Baldur's Gate
          <li>value 0x02- Planescape: Torment
          <li>value 0x03- Icewind Dale
          <li>value 0x04- Baldur's Gate II: Shadows of Amn</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (dword)</td>
      <td>Text Entries Offset</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (dword)</td>
      <td>Number of Text Headers</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td>Text Headers Offset</td>
    </tr>
    <tr>
      <td>0x002C</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGV3_0_TextHeader">TBG V3.0 Text Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th>Offset</th>
      <th>Size (datatype)</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (dword)</td>
      <td>Offset to Text (from beginning of Text Entries)</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Length of Text</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>Offset in data file where the strref should be inserted, or -1 (FFFF
        FFFF) if the strref should not be inserted into the data file</td>
    </tr>
    <tr>
      <td>0x000C</td>
      <td>8 (char array)</td>
      <td>Associated sound file name</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGV3_0_File">TBG V3.0 File</a></h4>
<p>This is simply the entire file itself that is to be transferred via this file
format.</p>
<h4 class="reshead"><a name="formTBGV3_0_TextEntries">TBG V3.0 Text Entries</a></h4>
<p>This is all the actual text that will be actually imported into the Infinity
Engine game.</p>
<br>
<br>
<br>
<h2 class="frmhead"><a name="formTBGV4_0">TBG V4.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formTBGV4_0_Header">Header</a>
  <li><a href="#formTBGV4_0_TextHeader">Text Headers</a>
  <li><a href="#formTBGV4_0_StrRefLocations">StrRef Locations</a>
  <li><a href="#formTBGV4_0_ASCIILocations">ASCII Locations</a>
  <li><a href="#formTBGV4_0_File">File</a>
  <li><a href="#formTBGV4_0_TextEntries">Text Entries</a></li>
</ul>
<h4 class="reshead"><a name="formTBGV4_0_Header">TBG V4.0 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (char array)</td>
      <td>TBG Identifier (&quot;TBG4&quot;)</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Null fields</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>12 (char array)</td>
      <td>Filename with Extension of file</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4 (dword)</td>
      <td>File Offset</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>4 (dword)</td>
      <td>File Length</td>
    </tr>
    <tr>
      <td>0x001C</td>
      <td>4 (dword)</td>
      <td>Infinity Engine Game TBG is for:
        <ul>
          <li>value 0x01- Baldur's Gate
          <li>value 0x02- Planescape: Torment
          <li>value 0x03- Icewind Dale
          <li>value 0x04- Baldur's Gate II: Shadows of Amn</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0020</td>
      <td>4 (dword)</td>
      <td>Text Entries Offset</td>
    </tr>
    <tr>
      <td>0x0024</td>
      <td>4 (dword)</td>
      <td>Number of Text Headers</td>
    </tr>
    <tr>
      <td>0x0028</td>
      <td>4 (dword)</td>
      <td>Text Headers Offset</td>
    </tr>
    <tr>
      <td>0x002C</td>
      <td>4 (dword)</td>
      <td>Number of StrRefs Locations</td>
    </tr>
    <tr>
      <td>0x0030</td>
      <td>4 (dword)</td>
      <td>StrRefs Locations Offset</td>
    </tr>
    <tr>
      <td>0x0034</td>
      <td>4 (dword)</td>
      <td>Number of ASCII Locations</td>
    </tr>
    <tr>
      <td>0x0038</td>
      <td>4 (dword)</td>
      <td>ASCII Locations Offset</td>
    </tr>
    <tr>
      <td>0x003C</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGV4_0_TextHeader">TBG V4.0 Text Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (dword)</td>
      <td>Offset to Text (from beginning of Text Entries)</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Length of Text</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>8 (char array)</td>
      <td>Associated sound file name</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>4 (dword)</td>
      <td>Volume variance of sound file</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>4 (dword)</td>
      <td>Pitch variance of sound file</td>
    </tr>
    <tr>
      <td>0x0018</td>
      <td>2 (word)</td>
      <td>Entry type into dialog.tlk file:
        <ul>
          <li>value 0x00- unused entry
          <li>value 0x02- unused entry
          <li>value 0x03- normal text
          <li>value 0x07- Parse special character strings in text (BG2 only all
            others auto-parse with a value of 0x03)</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x001A</td>
      <td>4 (dword)</td>
      <td>Offest in StrRefs Locations for text entry (Long) in File:
        <ul>
          <li>value 0xFFFFFFFF- No StrRefs Locations</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x001E</td>
      <td>4 (dword)</td>
      <td>Number of StrRefs Locations for text entry (Long) in File</td>
    </tr>
    <tr>
      <td>0x0022</td>
      <td>4 (dword)</td>
      <td>Offest in StrRefs Locations for text entry (ASCII) in File:
        <ul>
          <li>value 0xFFFFFFFF- No StrRefs Locations</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0026</td>
      <td>4 (dword)</td>
      <td>Number of StrRefs Locations for text entry (ASCII) in File</td>
    </tr>
    <tr>
      <td>0x002A</td>
      <td>4 (dword)</td>
      <td>Offest in ASCII Locations for length incremenataion in File:
        <ul>
          <li>value 0xFFFFFFFF- No ASCII Locations</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x002E</td>
      <td>4 (dword)</td>
      <td>Number of ASCII locations for length incremenataion in File</td>
    </tr>
    <tr>
      <td>0x0032</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGV4_0_StrRefLocations">TBG V4.0 StrRef
Locations</h4>
<p>This is simply a group of dwords holding the offsets for the locations in the
File to put the new StrRef values from the imported Text Entries.</p>
<h4 class="reshead"></a><a name="formTBGV4_0_ASCIILocations">TBG V4.0 ASCII
Locations</a></h4>
<p>This is simply a group of dwords holding the offsets for the locations in the
File to increment by the length of the new StrRef values from the imported Text
Entries.</p>
<h4 class="reshead"><a name="formTBGV4_0_File">TBG V4.0 File</a></h4>
<p>This is simply the entire file itself that is to be transferred via this file
format.</p>
<h4 class="reshead"><a name="formTBGV4_0_TextEntries">TBG V4.0 Text Entries</a></h4>
<p>This is all the actual text that will be actually imported into the Infinity
Engine game.<br>
</p>
<h2 class="frmhead"><a name="formTBGNV1_0">TBGN V1.0</a></h2>
<p>Overall structure</p>
<ul>
  <li><a href="#formTBGNV1_0_Header">Header</a>
  <li><a href="#formTBGNV1_0_NPCHeader">NPC Headers</a></li>
</ul>
<h4 class="reshead"><a name="formTBGV4_0_Header">TBGN V1.0 Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>4 (char array)</td>
      <td>TBG Identifier (&quot;TBGN&quot;)</td>
    </tr>
    <tr>
      <td>0x0004</td>
      <td>4 (dword)</td>
      <td>Null fields</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>4 (dword)</td>
      <td>NPC Header Offset</td>
    </tr>
    <tr>
      <td>0x000C</td>
      <td>4 (dword)</td>
      <td>NPC Header Count</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>2 (word)</td>
      <td>Infinity Engine Game TBG is for:
        <ul>
          <li>value 0x01- Baldur's Gate
          <li>value 0x02- Planescape: Torment
          <li>value 0x03- Icewind Dale
          <li>value 0x04- Baldur's Gate II: Shadows of Amn</li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>0x0012</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<h4 class="reshead"><a name="formTBGNV1_0_NPCHeader">TBGN V1.0 NPC Header</a></h4>
<table border="1" class="tbl3" width="98%">
  <colgroup>
    <col class="col1" width="5%">
    <col class="col2" width="12%">
    <col class="col3" width="*">
  </colgroup>
  <thead>
    <tr>
      <th><font color="#000000">Offset</font></th>
      <th><font color="#000000">Size (datatype)</font></th>
      <th><font color="#000000">Description</font></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0x0000</td>
      <td>8 (char array)</td>
      <td>NPC FileName (minus CRE extension)</td>
    </tr>
    <tr>
      <td>0x0008</td>
      <td>8 (char array)</td>
      <td>Area FileName NPC starts at</td>
    </tr>
    <tr>
      <td>0x0010</td>
      <td>2 (word)</td>
      <td>X Coordinate in Area NPC starts at</td>
    </tr>
    <tr>
      <td>0x0012</td>
      <td>2 (word)</td>
      <td>Y Coordinate in Area NPC starts at</td>
    </tr>
    <tr>
      <td>0x0014</td>
      <td>-----</td>
      <td>End of Structure</td>
    </tr>
  </tbody>
</table>
<br>

</body>


<!-- Mirrored from www25.brinkster.com by HTTrack Website Copier/3.x [XR,YP'2001] -->
</html>
